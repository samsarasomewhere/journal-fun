import{r as pe,a as fr,b as hr,c as pr,d as mr,e as _r,f as Nr,g as Cr,h as Tr,i as Er,j as xr,k as vr,l as Sr,m as yr,n as Or,o as Rr}from"./vendor-FkhYK7MY.js";import{r as ye,a as Mr}from"./vendor-react-CGN2gpqy.js";var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $r(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function Nn(f){if(Object.prototype.hasOwnProperty.call(f,"__esModule"))return f;var l=f.default;if(typeof l=="function"){var T=function s(){return this instanceof s?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};T.prototype=l.prototype}else T={};return Object.defineProperty(T,"__esModule",{value:!0}),Object.keys(f).forEach(function(s){var I=Object.getOwnPropertyDescriptor(f,s);Object.defineProperty(T,s,I.get?I:{enumerable:!0,get:function(){return f[s]}})}),T}var we={},Nt;function Dr(){if(Nt)return we;Nt=1;var f=ye();function l(s){let I=new URLSearchParams;I.append("code",s);for(let w=1;w<arguments.length;w++)I.append("v",arguments[w]);throw Error(`Minified Lexical error #${s}; visit https://lexical.dev/docs/error?${I} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let T=f.createContext(null);return we.LexicalComposerContext=T,we.createLexicalComposerContext=function(s,I){let w=null;return s!=null&&(w=s[1]),{getTheme:function(){return I??(w!=null?w.getTheme():null)}}},we.useLexicalComposerContext=function(){let s=f.useContext(T);return s==null&&l(8),s},we}var Be,Ct;function Re(){return Ct||(Ct=1,Be=Dr()),Be}var Cn=Re(),He={},Tt;function wr(){if(Tt)return He;Tt=1;var f=Re(),l=pe(),T=ye();let s=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";var I=s?T.useLayoutEffect:T.useEffect;let w={tag:"history-merge"};function O(_,E){if(E!==null){if(E===void 0)_.update(()=>{var m=l.$getRoot();if(m.isEmpty()){let p=l.$createParagraphNode();m.append(p),m=s?document.activeElement:null,(l.$getSelection()!==null||m!==null&&m===_.getRootElement())&&p.select()}},w);else if(E!==null)switch(typeof E){case"string":let m=_.parseEditorState(E);_.setEditorState(m,w);break;case"object":_.setEditorState(E,w);break;case"function":_.update(()=>{l.$getRoot().isEmpty()&&E(_)},w)}}}return He.LexicalComposer=function({initialConfig:_,children:E}){let m=T.useMemo(()=>{const{theme:p,namespace:v,editor__DEPRECATED:c,nodes:e,onError:r,editorState:i,html:g}=_,a=f.createLexicalComposerContext(null,p);let y=c||null;if(y===null){const L=l.createEditor({editable:_.editable,html:g,namespace:v,nodes:e,onError:M=>r(M,L),theme:p});O(L,i),y=L}return[y,a]},[]);return I(()=>{let p=_.editable,[v]=m;v.setEditable(p!==void 0?p:!0)},[]),T.createElement(f.LexicalComposerContext.Provider,{value:m},E)},He}var Ye,Et;function Ar(){return Et||(Et=1,Ye=wr()),Ye}var Tn=Ar(),qe={},We,xt;function Pr(){if(xt)return We;xt=1;var f=Re(),l=ye(),T=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?l.useLayoutEffect:l.useEffect;function s(w){let[O]=f.useLexicalComposerContext(),_=l.useMemo(()=>w(O),[O,w]),E=l.useRef(_.initialValueFn()),[m,p]=l.useState(E.current);return T(()=>{let{initialValueFn:v,subscribe:c}=_,e=v();return E.current!==e&&(E.current=e,p(e)),c(r=>{E.current=r,p(r)})},[_,w]),m}function I(w){return{initialValueFn:()=>w.isEditable(),subscribe:O=>w.registerEditableListener(O)}}return We=function(){return s(I)},We}var Ue,vt;function Ir(){return vt||(vt=1,Ue=Pr()),Ue}var Oe={},St;function kr(){if(St)return Oe;St=1;var f=pe();function l(I,w=!0){return I?!1:(I=T(),w&&(I=I.trim()),I==="")}function T(){return f.$getRoot().getTextContent()}function s(I){if(!l(I,!1))return!1;I=f.$getRoot().getChildren();let w=I.length;if(1<w)return!1;for(let _=0;_<w;_++){var O=I[_];if(f.$isDecoratorNode(O))return!1;if(f.$isElementNode(O)){if(!f.$isParagraphNode(O)||O.__indent!==0)return!1;O=O.getChildren();let E=O.length;for(let m=0;m<E;m++)if(!f.$isTextNode(O[_]))return!1}}return!0}return Oe.$canShowPlaceholder=s,Oe.$canShowPlaceholderCurry=function(I){return()=>s(I)},Oe.$findTextIntersectionFromCharacters=function(I,w){var O=I.getFirstChild();I=0;e:for(;O!==null;){if(f.$isElementNode(O)){var _=O.getFirstChild();if(_!==null){O=_;continue}}else if(f.$isTextNode(O)){if(_=O.getTextContentSize(),I+_>w)return{node:O,offset:w-I};I+=_}if(_=O.getNextSibling(),_!==null)O=_;else{for(O=O.getParent();O!==null;){if(_=O.getNextSibling(),_!==null){O=_;continue e}O=O.getParent()}break}}return null},Oe.$isRootTextContentEmpty=l,Oe.$isRootTextContentEmptyCurry=function(I,w){return()=>l(I,w)},Oe.$rootTextContent=T,Oe.registerLexicalTextEntity=function(I,w,O,_){let E=p=>{const v=f.$createTextNode(p.getTextContent());v.setFormat(p.getFormat()),p.replace(v)},m=I.registerNodeTransform(f.TextNode,p=>{if(p.isSimpleText()){var v=p.getPreviousSibling(),c=p.getTextContent(),e=p;if(f.$isTextNode(v)){var r=v.getTextContent(),i=w(r+c);if(v instanceof O){if(i===null||v.getLatest().__mode!==0){E(v);return}if(i=i.end-r.length,0<i){e=c.slice(0,i),e=r+e,v.select(),v.setTextContent(e),i===c.length?p.remove():(v=c.slice(i),p.setTextContent(v));return}}else if(i===null||i.start<r.length)return}for(;;){if(p=w(c),c=i=p===null?"":c.slice(p.end),i===""){if(r=e.getNextSibling(),f.$isTextNode(r)){if(i=e.getTextContent()+r.getTextContent(),i=w(i),i===null){r instanceof O?E(r):r.markDirty();break}else if(i.start!==0)break}}else if(r=w(i),r!==null&&r.start===0)break;if(p===null)break;if(p.start===0&&f.$isTextNode(v)&&v.isTextEntity())continue;let g;if(p.start===0?[g,e]=e.splitText(p.end):[,g,e]=e.splitText(p.start,p.end),p=_(g),p.setFormat(g.getFormat()),g.replace(p),e==null)break}}});return I=I.registerNodeTransform(O,p=>{var v=p.getTextContent();const c=w(v);c===null||c.start!==0?E(p):v.length>c.end?p.splitText(c.end):(v=p.getPreviousSibling(),f.$isTextNode(v)&&v.isTextEntity()&&(E(v),E(p)),v=p.getNextSibling(),f.$isTextNode(v)&&v.isTextEntity()&&(E(v),p instanceof O&&E(p)))}),[m,I]},Oe}var ze,yt;function br(){return yt||(yt=1,ze=kr()),ze}var ce={},fe={},Ot;function Fr(){if(Ot)return fe;Ot=1;var f=pe();let l=new Map;function T(e){for(;e!=null;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function s(e){let r=e.parentNode;if(r==null)throw Error("Should never happen");return[r,Array.from(r.childNodes).indexOf(e)]}function I(e){let r={};e=e.split(";");for(let i of e)if(i!==""){let[g,a]=i.split(/:([^]+)/);g&&a&&(r[g.trim()]=a.trim())}return r}function w(e){let r=l.get(e);return r===void 0&&(r=I(e),l.set(e,r)),r}function O(e){let r="";for(let i in e)i&&(r+=`${i}: ${e[i]};`);return r}function _(e,r){let i=w("getStyle"in e?e.getStyle():e.style);r=Object.entries(r).reduce((a,[y,L])=>(L instanceof Function?a[y]=L(i[y]):L===null?delete a[y]:a[y]=L,a),{...i});let g=O(r);e.setStyle(g),l.set(g,r)}function E(e){for(;e!==null&&!f.$isRootOrShadowRoot(e);){let r=e.getLatest(),i=e.getParent();r.getChildrenSize()===0&&e.remove(!0),e=i}}function m(e,r,i,g,a=null){if(r.length!==0){var y=r[0],L=new Map,M=[];y=f.$isElementNode(y)?y:y.getParentOrThrow(),y.isInline()&&(y=y.getParentOrThrow());for(var K=!1;y!==null;){var z=y.getPreviousSibling();if(z!==null){y=z,K=!0;break}if(y=y.getParentOrThrow(),f.$isRootOrShadowRoot(y))break}z=new Set;for(var G=0;G<i;G++){var V=r[G];f.$isElementNode(V)&&V.getChildrenSize()===0&&z.add(V.getKey())}var R=new Set;for(G=0;G<i;G++){V=r[G];var d=V.getParent();if(d!==null&&d.isInline()&&(d=d.getParent()),d!==null&&f.$isLeafNode(V)&&!R.has(V.getKey())){if(V=d.getKey(),L.get(V)===void 0){let h=g();h.setFormat(d.getFormatType()),h.setIndent(d.getIndent()),M.push(h),L.set(V,h),d.getChildren().forEach(j=>{h.append(j),R.add(j.getKey()),f.$isElementNode(j)&&j.getChildrenKeys().forEach(ue=>R.add(ue))}),E(d)}}else if(z.has(V.getKey())){if(!f.$isElementNode(V))throw Error("Expected node in emptyElements to be an ElementNode");d=g(),d.setFormat(V.getFormatType()),d.setIndent(V.getIndent()),M.push(d),V.remove(!0)}}if(a!==null)for(r=0;r<M.length;r++)a.append(M[r]);if(r=null,f.$isRootOrShadowRoot(y))if(K)if(a!==null)y.insertAfter(a);else for(a=M.length-1;0<=a;a--)y.insertAfter(M[a]);else if(K=y.getFirstChild(),f.$isElementNode(K)&&(y=K),K===null)if(a)y.append(a);else for(a=0;a<M.length;a++)K=M[a],y.append(K),r=K;else if(a!==null)K.insertBefore(a);else for(y=0;y<M.length;y++)a=M[y],K.insertBefore(a),r=a;else if(a)y.insertAfter(a);else for(a=M.length-1;0<=a;a--)K=M[a],y.insertAfter(K),r=K;M=f.$getPreviousSelection(),f.$isRangeSelection(M)&&M.anchor.getNode().isAttached()&&M.focus.getNode().isAttached()?f.$setSelection(M.clone()):r!==null?r.selectEnd():e.dirty=!0}}function p(e,r,i,g){e.modify(r?"extend":"move",i,g)}function v(e){return e=e.anchor.getNode(),(f.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}function c(e){if(f.$isDecoratorNode(e)||!f.$isElementNode(e)||f.$isRootOrShadowRoot(e))return!1;var r=e.getFirstChild();return r=r===null||f.$isLineBreakNode(r)||f.$isTextNode(r)||r.isInline(),!e.isInline()&&e.canBeEmpty()!==!1&&r}return fe.$addNodeStyle=function(e){e=e.getStyle();let r=I(e);l.set(e,r)},fe.$cloneWithProperties=function(e){let r=e.constructor.clone(e);return r.__parent=e.__parent,r.__next=e.__next,r.__prev=e.__prev,f.$isElementNode(e)&&f.$isElementNode(r)?(r.__first=e.__first,r.__last=e.__last,r.__size=e.__size,r.__format=e.__format,r.__indent=e.__indent,r.__dir=e.__dir,r):(f.$isTextNode(e)&&f.$isTextNode(r)&&(r.__format=e.__format,r.__style=e.__style,r.__mode=e.__mode,r.__detail=e.__detail),r)},fe.$getSelectionStyleValueForProperty=function(e,r,i=""){let g=null,a=e.getNodes();var y=e.anchor,L=e.focus,M=e.isBackward();let K=M?L.offset:y.offset;if(y=M?L.getNode():y.getNode(),e.isCollapsed()&&e.style!==""&&(e=w(e.style),e!==null&&r in e))return e[r];for(e=0;e<a.length;e++){var z=a[e];if((e===0||K!==0||!z.is(y))&&f.$isTextNode(z)){if(L=r,M=i,z=z.getStyle(),z=w(z),L=z!==null&&z[L]||M,g===null)g=L;else if(g!==L){g="";break}}}return g===null?i:g},fe.$isAtNodeEnd=function(e){if(e.type==="text")return e.offset===e.getNode().getTextContentSize();let r=e.getNode();if(!f.$isElementNode(r))throw Error("isAtNodeEnd: node must be a TextNode or ElementNode");return e.offset===r.getChildrenSize()},fe.$isParentElementRTL=v,fe.$moveCaretSelection=p,fe.$moveCharacter=function(e,r,i){let g=v(e);p(e,r,i?!g:g,"character")},fe.$patchStyleText=function(e,r){var i=e.getNodes(),g=i.length,a=e.getStartEndPoints();if(a!==null){var[y,L]=a;--g,a=i[0];var M=i[g];if(e.isCollapsed()&&f.$isRangeSelection(e))_(e,r);else{var K=a.getTextContent().length,z=L.offset,G=y.offset,V=y.isBefore(L),R=V?G:z;e=V?z:G;var d=V?y.type:L.type,h=V?L.type:y.type;if(V=V?L.key:y.key,f.$isTextNode(a)&&R===K){let j=a.getNextSibling();f.$isTextNode(j)&&(R=G=0,a=j)}if(i.length===1)f.$isTextNode(a)&&a.canHaveFormat()&&(R=d==="element"?0:G>z?z:G,e=h==="element"?K:G>z?G:z,R!==e&&(R===0&&e===K?(_(a,r),a.select(R,e)):(i=a.splitText(R,e),i=R===0?i[0]:i[1],_(i,r),i.select(0,e-R))));else for(f.$isTextNode(a)&&R<a.getTextContentSize()&&a.canHaveFormat()&&(R!==0&&(a=a.splitText(R)[1],R=0,y.set(a.getKey(),R,"text")),_(a,r)),f.$isTextNode(M)&&M.canHaveFormat()&&(R=M.getTextContent().length,M.__key!==V&&e!==0&&(e=R),e!==R&&([M]=M.splitText(e)),e===0&&h!=="element"||_(M,r)),e=1;e<g;e++)R=i[e],h=R.getKey(),f.$isTextNode(R)&&R.canHaveFormat()&&h!==a.getKey()&&h!==M.getKey()&&!R.isToken()&&_(R,r)}}},fe.$selectAll=function(e){let r=e.anchor;e=e.focus;var i=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();let g=i.getFirstDescendant();i=i.getLastDescendant();let a="element",y="element",L=0;f.$isTextNode(g)?a="text":f.$isElementNode(g)||g===null||(g=g.getParentOrThrow()),f.$isTextNode(i)?(y="text",L=i.getTextContentSize()):f.$isElementNode(i)||i===null||(i=i.getParentOrThrow()),g&&i&&(r.set(g.getKey(),0,a),e.set(i.getKey(),L,y))},fe.$setBlocksType=function(e,r){if(e!==null){var i=e.getStartEndPoints();if(i=i?i[0]:null,i!==null&&i.key==="root")r=r(),e=f.$getRoot(),(i=e.getFirstChild())?i.replace(r,!0):e.append(r);else{if(e=e.getNodes(),i!==null){for(i=i.getNode();i!==null&&i.getParent()!==null&&!c(i);)i=i.getParentOrThrow();i=c(i)?i:null}else i=!1;for(i&&e.indexOf(i)===-1&&e.push(i),i=0;i<e.length;i++){let g=e[i];if(!c(g))continue;if(!f.$isElementNode(g))throw Error("Expected block node to be an ElementNode");let a=r();a.setFormat(g.getFormatType()),a.setIndent(g.getIndent()),g.replace(a,!0)}}}},fe.$shouldOverrideDefaultCharacterSelection=function(e,r){return e=f.$getAdjacentNode(e.focus,r),f.$isDecoratorNode(e)&&!e.isIsolated()||f.$isElementNode(e)&&!e.isInline()&&!e.canBeEmpty()},fe.$sliceSelectedTextNodeContent=function(e,r){var i=e.getStartEndPoints();if(r.isSelected(e)&&!r.isSegmented()&&!r.isToken()&&i!==null){let[M,K]=i;i=e.isBackward();var g=M.getNode(),a=K.getNode(),y=r.is(g),L=r.is(a);if(y||L){let[z,G]=f.$getCharacterOffsets(e);e=g.is(a),y=r.is(i?a:g),a=r.is(i?g:a),g=0,L=void 0,e?(g=z>G?G:z,L=z>G?z:G):y?(g=i?G:z,L=void 0):a&&(i=i?z:G,g=0,L=i),r.__text=r.__text.slice(g,L)}}return r},fe.$wrapNodes=function(e,r,i=null){var g=e.getStartEndPoints(),a=g?g[0]:null;g=e.getNodes();let y=g.length;if(a!==null&&(y===0||y===1&&a.type==="element"&&a.getNode().getChildrenSize()===0)){e=a.type==="text"?a.getNode().getParentOrThrow():a.getNode(),g=e.getChildren();let M=r();M.setFormat(e.getFormatType()),M.setIndent(e.getIndent()),g.forEach(K=>M.append(K)),i&&(M=i.append(M)),e.replace(M)}else{a=null;var L=[];for(let M=0;M<y;M++){let K=g[M];f.$isRootOrShadowRoot(K)?(m(e,L,L.length,r,i),L=[],a=K):a===null||a!==null&&f.$hasAncestor(K,a)?L.push(K):(m(e,L,L.length,r,i),L=[K])}m(e,L,L.length,r,i)}},fe.createDOMRange=function(e,r,i,g,a){let y=r.getKey(),L=g.getKey(),M=document.createRange(),K=e.getElementByKey(y);if(e=e.getElementByKey(L),f.$isTextNode(r)&&(K=T(K)),f.$isTextNode(g)&&(e=T(e)),r===void 0||g===void 0||K===null||e===null)return null;K.nodeName==="BR"&&([K,i]=s(K)),e.nodeName==="BR"&&([e,a]=s(e)),r=K.firstChild,K===e&&r!=null&&r.nodeName==="BR"&&i===0&&a===0&&(a=1);try{M.setStart(K,i),M.setEnd(e,a)}catch{return null}return!M.collapsed||i===a&&y===L||(M.setStart(e,a),M.setEnd(K,i)),M},fe.createRectsFromDOMRange=function(e,r){var i=e.getRootElement();if(i===null)return[];e=i.getBoundingClientRect(),i=getComputedStyle(i),i=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r=Array.from(r.getClientRects());let g=r.length;r.sort((y,L)=>{let M=y.top-L.top;return 3>=Math.abs(M)?y.left-L.left:M});let a;for(let y=0;y<g;y++){let L=r[y],M=L.width+i===e.width;a&&a.top<=L.top&&a.top+a.height>L.top&&a.left+a.width>L.left||M?(r.splice(y--,1),g--):a=L}return r},fe.getStyleObjectFromCSS=w,fe.trimTextContentFromAnchor=function(e,r,i){let g=r.getNode();if(f.$isElementNode(g)){var a=g.getDescendantByIndex(r.offset);a!==null&&(g=a)}for(;0<i&&g!==null;){f.$isElementNode(g)&&(a=g.getLastDescendant(),a!==null&&(g=a));var y=g.getPreviousSibling(),L=0;if(y===null){a=g.getParentOrThrow();for(var M=a.getPreviousSibling();M===null;){if(a=a.getParent(),a===null){y=null;break}M=a.getPreviousSibling()}a!==null&&(L=a.isInline()?0:2,y=M)}if(M=g.getTextContent(),M===""&&f.$isElementNode(g)&&!g.isInline()&&(M=`

`),a=M.length,!f.$isTextNode(g)||i>=a)M=g.getParent(),g.remove(),M==null||M.getChildrenSize()!==0||f.$isRootNode(M)||M.remove(),i-=a+L,g=y;else{let K=g.getKey();L=e.getEditorState().read(()=>{const G=f.$getNodeByKey(K);return f.$isTextNode(G)&&G.isSimpleText()?G.getTextContent():null}),y=a-i;let z=M.slice(0,y);L!==null&&L!==M?(i=f.$getPreviousSelection(),a=g,g.isSimpleText()?g.setTextContent(L):(a=f.$createTextNode(L),g.replace(a)),f.$isRangeSelection(i)&&i.isCollapsed()&&(i=i.anchor.offset,a.select(i,i))):g.isSimpleText()?(L=r.key===K,M=r.offset,M<i&&(M=a),i=L?M-i:0,a=L?M:y,L&&i===0?([i]=g.splitText(i,a),i.remove()):([,i]=g.splitText(i,a),i.remove())):(i=f.$createTextNode(z),g.replace(i)),i=0}}},fe}var je,Rt;function Fe(){return Rt||(Rt=1,je=Fr()),je}var Mt;function Kr(){if(Mt)return ce;Mt=1;var f=Fe(),l=pe();function T(E){let m=new URLSearchParams;m.append("code",E);for(let p=1;p<arguments.length;p++)m.append("v",arguments[p]);throw Error(`Minified Lexical error #${E}; visit https://lexical.dev/docs/error?${m} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function s(...E){return()=>{E.forEach(m=>m())}}let I={attributes:!0,characterData:!0,childList:!0,subtree:!0};function w(E,m,p){function v(){if(r===null)throw Error("Unexpected null rootDOMNode");if(i===null)throw Error("Unexpected null parentDOMNode");let{left:M,top:K}=r.getBoundingClientRect();var z=i;let G=f.createRectsFromDOMRange(E,m);y.isConnected||z.append(y),z=!1;for(let d=0;d<G.length;d++){var V=G[d];let h=a[d]||document.createElement("div"),j=h.style;j.position!=="absolute"&&(j.position="absolute",z=!0);var R=`${V.left-M}px`;j.left!==R&&(j.left=R,z=!0),R=`${V.top-K}px`,j.top!==R&&(h.style.top=R,z=!0),R=`${V.width}px`,j.width!==R&&(h.style.width=R,z=!0),V=`${V.height}px`,j.height!==V&&(h.style.height=V,z=!0),h.parentNode!==y&&(y.append(h),z=!0),a[d]=h}for(;a.length>G.length;)a.pop();z&&p(a)}function c(){r=i=null,g!==null&&g.disconnect(),g=null,y.remove();for(let M of a)M.remove();a=[]}function e(){let M=E.getRootElement();if(M===null)return c();let K=M.parentElement;if(!(K instanceof HTMLElement))return c();c(),r=M,i=K,g=new MutationObserver(z=>{let G=E.getRootElement(),V=G&&G.parentElement;if(G!==r||V!==i)return e();for(let R of z)if(!y.contains(R.target))return v()}),g.observe(K,I),v()}let r=null,i=null,g=null,a=[],y=document.createElement("div"),L=E.registerRootListener(e);return()=>{L(),c()}}function O(E,m){for(let p of m)if(E.type.startsWith(p))return!0;return!1}let _=(E,m)=>{for(;E!==l.$getRoot()&&E!=null;){if(m(E))return E;E=E.getParent()}return null};return ce.$splitNode=l.$splitNode,ce.isHTMLAnchorElement=l.isHTMLAnchorElement,ce.isHTMLElement=l.isHTMLElement,ce.$dfs=function(E,m){let p=[];E=(E||l.$getRoot()).getLatest(),m=m||(l.$isElementNode(E)?E.getLastDescendant():E);for(var v=E,c=0;(v=v.getParent())!==null;)c++;for(v=c;E!==null&&!E.is(m);)if(p.push({depth:v,node:E}),l.$isElementNode(E)&&0<E.getChildrenSize())E=E.getFirstChild(),v++;else for(c=null;c===null&&E!==null;)c=E.getNextSibling(),c===null?(E=E.getParent(),v--):E=c;return E!==null&&E.is(m)&&p.push({depth:v,node:E}),p},ce.$filter=function(E,m){let p=[];for(let v=0;v<E.length;v++){let c=m(E[v]);c!==null&&p.push(c)}return p},ce.$findMatchingParent=_,ce.$getNearestBlockElementAncestorOrThrow=function(E){let m=_(E,p=>l.$isElementNode(p)&&!p.isInline());return l.$isElementNode(m)||T(4,E.__key),m},ce.$getNearestNodeOfType=function(E,m){for(;E!=null;){if(E instanceof m)return E;E=E.getParent()}return null},ce.$insertFirst=function(E,m){let p=E.getFirstChild();p!==null?p.insertBefore(m):E.append(m)},ce.$insertNodeToNearestRoot=function(E){var m=l.$getSelection()||l.$getPreviousSelection();if(l.$isRangeSelection(m)){var{focus:p}=m;if(m=p.getNode(),p=p.offset,l.$isRootOrShadowRoot(m))p=m.getChildAtIndex(p),p==null?m.append(E):p.insertBefore(E),E.selectNext();else{let v,c;l.$isTextNode(m)?(v=m.getParentOrThrow(),c=m.getIndexWithinParent(),0<p&&(c+=1,m.splitText(p))):(v=m,c=p),[,m]=l.$splitNode(v,c),m.insertBefore(E),m.selectStart()}}else m!=null?(m=m.getNodes(),m[m.length-1].getTopLevelElementOrThrow().insertAfter(E)):l.$getRoot().append(E),m=l.$createParagraphNode(),E.insertAfter(m),m.select();return E.getLatest()},ce.$restoreEditorState=function(E,m){let p=new Map,v=E._pendingEditorState;for(let[c,e]of m._nodeMap){let r=f.$cloneWithProperties(e);if(l.$isTextNode(r)){if(!l.$isTextNode(e))throw Error("Expected node be a TextNode");r.__text=e.__text}p.set(c,r)}v&&(v._nodeMap=p),E._dirtyType=2,E=m._selection,l.$setSelection(E===null?null:E.clone())},ce.$wrapNodeInElement=function(E,m){return m=m(),E.replace(m),m.append(E),m},ce.addClassNamesToElement=function(E,...m){m.forEach(p=>{typeof p=="string"&&(p=p.split(" ").filter(v=>v!==""),E.classList.add(...p))})},ce.isMimeType=O,ce.markSelection=function(E,m){function p(g){g.read(()=>{var a=l.$getSelection();if(l.$isRangeSelection(a)){var{anchor:y,focus:L}=a;a=y.getNode();var M=a.getKey(),K=y.offset,z=L.getNode(),G=z.getKey(),V=L.offset,R=E.getElementByKey(M),d=E.getElementByKey(G);if(M=v===null||R===null||K!==c||M!==v.getKey()||a!==v&&(!(v instanceof l.TextNode)||a.updateDOM(v,R,E._config)),G=e===null||d===null||V!==r||G!==e.getKey()||z!==e&&(!(e instanceof l.TextNode)||z.updateDOM(e,d,E._config)),M||G){R=E.getElementByKey(y.getNode().getKey());var h=E.getElementByKey(L.getNode().getKey());if(R!==null&&h!==null&&R.tagName==="SPAN"&&h.tagName==="SPAN"){if(G=document.createRange(),L.isBefore(y)?(M=h,d=L.offset,h=R,R=y.offset):(M=R,d=y.offset,R=L.offset),M=M.firstChild,M===null||(h=h.firstChild,h===null))throw Error("Expected text node to be first child of span");G.setStart(M,d),G.setEnd(h,R),i(),i=w(E,G,j=>{for(let ue of j){let ae=ue.style;ae.background!=="Highlight"&&(ae.background="Highlight"),ae.color!=="HighlightText"&&(ae.color="HighlightText"),ae.zIndex!=="-1"&&(ae.zIndex="-1"),ae.pointerEvents!=="none"&&(ae.pointerEvents="none"),ae.marginTop!=="-1.5px"&&(ae.marginTop="-1.5px"),ae.paddingTop!=="4px"&&(ae.paddingTop="4px"),ae.paddingBottom!=="0px"&&(ae.paddingBottom="0px")}m!==void 0&&m(j)})}}v=a,c=K,e=z,r=V}else r=e=c=v=null,i(),i=()=>{}})}let v=null,c=null,e=null,r=null,i=()=>{};return p(E.getEditorState()),s(E.registerUpdateListener(({editorState:g})=>p(g)),i,()=>{i()})},ce.mediaFileReader=function(E,m){let p=E[Symbol.iterator]();return new Promise((v,c)=>{let e=[],r=()=>{const{done:i,value:g}=p.next();if(i)return v(e);const a=new FileReader;a.addEventListener("error",c),a.addEventListener("load",()=>{const y=a.result;typeof y=="string"&&e.push({file:g,result:y}),r()}),O(g,m)?a.readAsDataURL(g):r()};r()})},ce.mergeRegister=s,ce.objectKlassEquals=function(E,m){return E!==null?Object.getPrototypeOf(E).constructor.name===m.name:!1},ce.positionNodeOnRange=w,ce.registerNestedElementResolver=function(E,m,p,v){return E.registerNodeTransform(m,c=>{e:{for(var e=c.getChildren(),r=0;r<e.length;r++)if(e[r]instanceof m){e=null;break e}for(e=c;e!==null;)if(r=e,e=e.getParent(),e instanceof m){e={child:r,parent:e};break e}e=null}if(e!==null){const{child:i,parent:g}=e;if(i.is(c)){if(v(g,c),c=i.getNextSiblings(),e=c.length,g.insertAfter(i),e!==0){r=p(g),i.insertAfter(r);for(let a=0;a<e;a++)r.append(c[a])}g.canBeEmpty()||g.getChildrenSize()!==0||g.remove()}}})},ce.removeClassNamesFromElement=function(E,...m){m.forEach(p=>{typeof p=="string"&&E.classList.remove(...p.split(" "))})},ce}var Je,Lt;function Ce(){return Lt||(Lt=1,Je=Kr()),Je}var Ge={},$t;function Br(){if($t)return Ge;$t=1;var f=pe();return Ge.registerDragonSupport=function(l){let T=window.location.origin,s=I=>{if(I.origin===T){var w=l.getRootElement();if(document.activeElement===w&&(w=I.data,typeof w=="string")){try{var O=JSON.parse(w)}catch{return}if(O&&O.protocol==="nuanria_messaging"&&O.type==="request"&&(O=O.payload)&&O.functionId==="makeChanges"&&(O=O.args)){const[_,E,m,p,v]=O;l.update(()=>{const c=f.$getSelection();if(f.$isRangeSelection(c)){var e=c.anchor;let r=e.getNode(),i=0,g=0;f.$isTextNode(r)&&0<=_&&0<=E&&(i=_,g=_+E,c.setTextNodeRange(r,i,r,g)),(i!==g||m!=="")&&(c.insertRawText(m),r=e.getNode()),f.$isTextNode(r)&&(i=p,g=p+v,e=r.getTextContentSize(),i=i>e?e:i,g=g>e?e:g,c.setTextNodeRange(r,i,r,g)),I.stopImmediatePropagation()}})}}}};return window.addEventListener("message",s,!0),()=>{window.removeEventListener("message",s,!0)}},Ge}var Xe,Dt;function Hr(){return Dt||(Dt=1,Xe=Br()),Xe}var Te={},ve={},Ie={},wt;function Yr(){if(wt)return Ie;wt=1;var f=Fe(),l=Ce(),T=pe();function s(O,_,E,m=null){let p=m!==null?_.isSelected(m):!0,v=T.$isElementNode(_)&&_.excludeFromCopy("html");var c=_;m!==null&&(c=f.$cloneWithProperties(_),c=T.$isTextNode(c)&&m!==null?f.$sliceSelectedTextNodeContent(m,c):c);let e=T.$isElementNode(c)?c.getChildren():[];var r=O._nodes.get(c.getType());r=r&&r.exportDOM!==void 0?r.exportDOM(O,c):c.exportDOM(O);let{element:i,after:g}=r;if(!i)return!1;r=document.createDocumentFragment();for(let a=0;a<e.length;a++){let y=e[a],L=s(O,y,r,m);!p&&T.$isElementNode(_)&&L&&_.extractWithChild(y,m,"html")&&(p=!0)}return p&&!v?(l.isHTMLElement(i)&&i.append(r),E.append(i),g&&(O=g.call(c,i))&&i.replaceWith(O)):E.append(r),p}let I=new Set(["STYLE","SCRIPT"]);function w(O,_,E=new Map,m){let p=[];if(I.has(O.nodeName))return p;let v=null;var c,{nodeName:e}=O,r=_._htmlConversions.get(e.toLowerCase());if(e=null,r!==void 0)for(c of r)r=c(O),r!==null&&(e===null||(e.priority||0)<(r.priority||0))&&(e=r);if(e=(c=e!==null?e.conversion:null)?c(O):null,c=null,e!==null){if(c=e.after,r=e.node,v=Array.isArray(r)?r[r.length-1]:r,v!==null){for(var[,i]of E)if(v=i(v,m),!v)break;v&&p.push(...Array.isArray(r)?r:[v])}e.forChild!=null&&E.set(O.nodeName,e.forChild)}for(O=O.childNodes,m=[],i=0;i<O.length;i++)m.push(...w(O[i],_,new Map(E),v));return c!=null&&(m=c(m)),v==null?p=p.concat(m):T.$isElementNode(v)&&v.append(...m),p}return Ie.$generateHtmlFromNodes=function(O,_){if(typeof document>"u"||typeof window>"u"&&typeof Lr.window>"u")throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let E=document.createElement("div"),m=T.$getRoot().getChildren();for(let p=0;p<m.length;p++)s(O,m[p],E,_);return E.innerHTML},Ie.$generateNodesFromDOM=function(O,_){_=_.body?_.body.childNodes:[];let E=[];for(let p=0;p<_.length;p++){var m=_[p];I.has(m.nodeName)||(m=w(m,O),m!==null&&(E=E.concat(m)))}return E},Ie}var Ve,At;function qr(){return At||(At=1,Ve=Yr()),Ve}var Pt;function Wr(){if(Pt)return ve;Pt=1;var f=qr(),l=Fe(),T=Ce(),s=pe();function I(r){let i=new URLSearchParams;i.append("code",r);for(let g=1;g<arguments.length;g++)i.append("v",arguments[g]);throw Error(`Minified Lexical error #${r}; visit https://lexical.dev/docs/error?${i} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let w=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function O(r){let i=s.$getSelection();if(i==null)throw Error("Expected valid LexicalSelection");return s.$isRangeSelection(i)&&i.isCollapsed()||i.getNodes().length===0?"":f.$generateHtmlFromNodes(r,i)}function _(r){let i=s.$getSelection();if(i==null)throw Error("Expected valid LexicalSelection");return s.$isRangeSelection(i)&&i.isCollapsed()||i.getNodes().length===0?null:JSON.stringify(p(r,i))}function E(r,i,g){r.dispatchCommand(s.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:i,selection:g})||g.insertNodes(i)}function m(r,i,g,a=[]){let y=i!==null?g.isSelected(i):!0,L=s.$isElementNode(g)&&g.excludeFromCopy("html");var M=g;if(i!==null){var K=l.$cloneWithProperties(g);M=K=s.$isTextNode(K)&&i!==null?l.$sliceSelectedTextNodeContent(i,K):K}let z=s.$isElementNode(M)?M.getChildren():[];var G=M;K=G.exportJSON();var V=G.constructor;for(K.type!==V.getType()&&I(58,V.name),s.$isElementNode(G)&&(Array.isArray(K.children)||I(59,V.name)),s.$isTextNode(M)&&(M=M.__text,0<M.length?K.text=M:y=!1),M=0;M<z.length;M++)G=z[M],V=m(r,i,G,K.children),!y&&s.$isElementNode(g)&&V&&g.extractWithChild(G,i,"clone")&&(y=!0);if(y&&!L)a.push(K);else if(Array.isArray(K.children))for(r=0;r<K.children.length;r++)a.push(K.children[r]);return y}function p(r,i){let g=[],a=s.$getRoot().getChildren();for(let y=0;y<a.length;y++)m(r,i,a[y],g);return{namespace:r._config.namespace,nodes:g}}function v(r){let i=[];for(let g=0;g<r.length;g++){let a=s.$parseSerializedNode(r[g]);s.$isTextNode(a)&&l.$addNodeStyle(a),i.push(a)}return i}let c=null;function e(r,i){var g=w?(r._window||window).getSelection():null;if(!g)return!1;var a=g.anchorNode;if(g=g.focusNode,a!==null&&g!==null&&!s.isSelectionWithinEditor(r,a,g)||(i.preventDefault(),i=i.clipboardData,a=s.$getSelection(),i===null||a===null))return!1;g=O(r),r=_(r);let y="";return a!==null&&(y=a.getTextContent()),g!==null&&i.setData("text/html",g),r!==null&&i.setData("application/x-lexical-editor",r),i.setData("text/plain",y),!0}return ve.$generateJSONFromSelectedNodes=p,ve.$generateNodesFromSerializedNodes=v,ve.$getHtmlContent=O,ve.$getLexicalContent=_,ve.$insertDataTransferForPlainText=function(r,i){r=r.getData("text/plain")||r.getData("text/uri-list"),r!=null&&i.insertRawText(r)},ve.$insertDataTransferForRichText=function(r,i,g){var a=r.getData("application/x-lexical-editor");if(a)try{let L=JSON.parse(a);if(L.namespace===g._config.namespace&&Array.isArray(L.nodes)){let M=v(L.nodes);return E(g,M,i)}}catch{}if(a=r.getData("text/html"))try{var y=new DOMParser().parseFromString(a,"text/html");let L=f.$generateNodesFromDOM(g,y);return E(g,L,i)}catch{}if(r=r.getData("text/plain")||r.getData("text/uri-list"),r!=null)if(s.$isRangeSelection(i))for(r=r.split(/(\r?\n|\t)/),r[r.length-1]===""&&r.pop(),g=0;g<r.length;g++)y=r[g],y===`
`||y===`\r
`?i.insertParagraph():y==="	"?i.insertNodes([s.$createTabNode()]):i.insertText(y);else i.insertRawText(r)},ve.$insertGeneratedNodes=E,ve.copyToClipboard=async function(r,i){if(c!==null)return!1;if(i!==null)return new Promise(M=>{r.update(()=>{M(e(r,i))})});var g=r.getRootElement();let a=r._window==null?window.document:r._window.document,y=w?(r._window||window).getSelection():null;if(g===null||y===null)return!1;let L=a.createElement("span");return L.style.cssText="position: fixed; top: -1000px;",L.append(a.createTextNode("#")),g.append(L),g=new Range,g.setStart(L,0),g.setEnd(L,1),y.removeAllRanges(),y.addRange(g),new Promise(M=>{let K=r.registerCommand(s.COPY_COMMAND,z=>(T.objectKlassEquals(z,ClipboardEvent)&&(K(),c!==null&&(window.clearTimeout(c),c=null),M(e(r,z))),!0),s.COMMAND_PRIORITY_CRITICAL);c=window.setTimeout(()=>{K(),c=null,M(!1)},50),a.execCommand("copy"),L.remove()})},ve}var Qe,It;function Ur(){return It||(It=1,Qe=Wr()),Qe}var kt;function zr(){if(kt)return Te;kt=1;var f=Ur(),l=Fe(),T=Ce(),s=pe();function I(R,d){return typeof document.caretRangeFromPoint<"u"?(R=document.caretRangeFromPoint(R,d),R===null?null:{node:R.startContainer,offset:R.startOffset}):document.caretPositionFromPoint!=="undefined"?(R=document.caretPositionFromPoint(R,d),R===null?null:{node:R.offsetNode,offset:R.offset}):null}let w=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O=w&&"documentMode"in document?document.documentMode:null,_=w&&"InputEvent"in window&&!O?"getTargetRanges"in new window.InputEvent("input"):!1,E=w&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),m=w&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,p=w&&/^(?=.*Chrome).*/i.test(navigator.userAgent),v=w&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!p,c=s.createCommand("DRAG_DROP_PASTE_FILE");class e extends s.ElementNode{static getType(){return"quote"}static clone(d){return new e(d.__key)}constructor(d){super(d)}createDOM(d){let h=document.createElement("blockquote");return T.addClassNamesToElement(h,d.theme.quote),h}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:y,priority:0})}}exportDOM(d){if({element:d}=super.exportDOM(d),d&&T.isHTMLElement(d)){this.isEmpty()&&d.append(document.createElement("br"));var h=this.getFormatType();d.style.textAlign=h,(h=this.getDirection())&&(d.dir=h)}return{element:d}}static importJSON(d){let h=r();return h.setFormat(d.format),h.setIndent(d.indent),h.setDirection(d.direction),h}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(d,h){d=s.$createParagraphNode();let j=this.getDirection();return d.setDirection(j),this.insertAfter(d,h),d}collapseAtStart(){let d=s.$createParagraphNode();return this.getChildren().forEach(h=>d.append(h)),this.replace(d),!0}}function r(){return s.$applyNodeReplacement(new e)}class i extends s.ElementNode{static getType(){return"heading"}static clone(d){return new i(d.__tag,d.__key)}constructor(d,h){super(h),this.__tag=d}getTag(){return this.__tag}createDOM(d){let h=this.__tag,j=document.createElement(h);return d=d.theme.heading,d!==void 0&&T.addClassNamesToElement(j,d[h]),j}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:a,priority:0}),h2:()=>({conversion:a,priority:0}),h3:()=>({conversion:a,priority:0}),h4:()=>({conversion:a,priority:0}),h5:()=>({conversion:a,priority:0}),h6:()=>({conversion:a,priority:0}),p:d=>(d=d.firstChild,d!==null&&g(d)?{conversion:()=>({node:null}),priority:3}:null),span:d=>g(d)?{conversion:()=>({node:L("h1")}),priority:3}:null}}exportDOM(d){if({element:d}=super.exportDOM(d),d&&T.isHTMLElement(d)){this.isEmpty()&&d.append(document.createElement("br"));var h=this.getFormatType();d.style.textAlign=h,(h=this.getDirection())&&(d.dir=h)}return{element:d}}static importJSON(d){let h=L(d.tag);return h.setFormat(d.format),h.setIndent(d.indent),h.setDirection(d.direction),h}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(d,h=!0){let j=d?d.anchor.offset:0,ue=j!==this.getTextContentSize()&&d?L(this.getTag()):s.$createParagraphNode(),ae=this.getDirection();return ue.setDirection(ae),this.insertAfter(ue,h),j===0&&!this.isEmpty()&&d&&(d=s.$createParagraphNode(),d.select(),this.replace(d,!0)),ue}collapseAtStart(){let d=this.isEmpty()?s.$createParagraphNode():L(this.getTag());return this.getChildren().forEach(h=>d.append(h)),this.replace(d),!0}extractWithChild(){return!0}}function g(R){return R.nodeName.toLowerCase()==="span"?R.style.fontSize==="26pt":!1}function a(R){let d=R.nodeName.toLowerCase(),h=null;return(d==="h1"||d==="h2"||d==="h3"||d==="h4"||d==="h5"||d==="h6")&&(h=L(d),R.style!==null&&h.setFormat(R.style.textAlign)),{node:h}}function y(R){let d=r();return R.style!==null&&d.setFormat(R.style.textAlign),{node:d}}function L(R){return s.$applyNodeReplacement(new i(R))}function M(R,d){R.preventDefault(),d.update(()=>{let h=s.$getSelection(),j=R instanceof InputEvent||R instanceof KeyboardEvent?null:R.clipboardData;j!=null&&h!==null&&f.$insertDataTransferForRichText(j,h,d)},{tag:"paste"})}async function K(R,d){await f.copyToClipboard(d,T.objectKlassEquals(R,ClipboardEvent)?R:null),d.update(()=>{let h=s.$getSelection();s.$isRangeSelection(h)?h.removeText():s.$isNodeSelection(h)&&h.getNodes().forEach(j=>j.remove())})}function z(R){let d=null;if(R instanceof DragEvent?d=R.dataTransfer:R instanceof ClipboardEvent&&(d=R.clipboardData),d===null)return[!1,[],!1];var h=d.types;return R=h.includes("Files"),h=h.includes("text/html")||h.includes("text/plain"),[R,Array.from(d.files),h]}function G(R){var d=s.$getSelection();if(!s.$isRangeSelection(d))return!1;let h=new Set;d=d.getNodes();for(let ae=0;ae<d.length;ae++){var j=d[ae],ue=j.getKey();h.has(ue)||(j=T.$getNearestBlockElementAncestorOrThrow(j),ue=j.getKey(),j.canIndent()&&!h.has(ue)&&(h.add(ue),R(j)))}return 0<h.size}function V(R){return R=s.$getNearestNodeFromDOMNode(R),s.$isDecoratorNode(R)}return Te.$createHeadingNode=L,Te.$createQuoteNode=r,Te.$isHeadingNode=function(R){return R instanceof i},Te.$isQuoteNode=function(R){return R instanceof e},Te.DRAG_DROP_PASTE=c,Te.HeadingNode=i,Te.QuoteNode=e,Te.eventFiles=z,Te.registerRichText=function(R){return T.mergeRegister(R.registerCommand(s.CLICK_COMMAND,()=>{const d=s.$getSelection();return s.$isNodeSelection(d)?(d.clear(),!0):!1},0),R.registerCommand(s.DELETE_CHARACTER_COMMAND,d=>{const h=s.$getSelection();return s.$isRangeSelection(h)?(h.deleteCharacter(d),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.DELETE_WORD_COMMAND,d=>{const h=s.$getSelection();return s.$isRangeSelection(h)?(h.deleteWord(d),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.DELETE_LINE_COMMAND,d=>{const h=s.$getSelection();return s.$isRangeSelection(h)?(h.deleteLine(d),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.CONTROLLED_TEXT_INSERTION_COMMAND,d=>{const h=s.$getSelection();if(typeof d=="string")h!==null&&h.insertText(d);else{if(h===null)return!1;const j=d.dataTransfer;j!=null?f.$insertDataTransferForRichText(j,h,R):s.$isRangeSelection(h)&&(d=d.data)&&h.insertText(d)}return!0},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.REMOVE_TEXT_COMMAND,()=>{const d=s.$getSelection();return s.$isRangeSelection(d)?(d.removeText(),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.FORMAT_TEXT_COMMAND,d=>{const h=s.$getSelection();return s.$isRangeSelection(h)?(h.formatText(d),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.FORMAT_ELEMENT_COMMAND,d=>{var h=s.$getSelection();if(!s.$isRangeSelection(h)&&!s.$isNodeSelection(h))return!1;h=h.getNodes();for(const j of h)h=T.$findMatchingParent(j,ue=>s.$isElementNode(ue)&&!ue.isInline()),h!==null&&h.setFormat(d);return!0},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.INSERT_LINE_BREAK_COMMAND,d=>{const h=s.$getSelection();return s.$isRangeSelection(h)?(h.insertLineBreak(d),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.INSERT_PARAGRAPH_COMMAND,()=>{const d=s.$getSelection();return s.$isRangeSelection(d)?(d.insertParagraph(),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.INSERT_TAB_COMMAND,()=>(s.$insertNodes([s.$createTabNode()]),!0),s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.INDENT_CONTENT_COMMAND,()=>G(d=>{const h=d.getIndent();d.setIndent(h+1)}),s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.OUTDENT_CONTENT_COMMAND,()=>G(d=>{const h=d.getIndent();0<h&&d.setIndent(h-1)}),s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.KEY_ARROW_UP_COMMAND,d=>{var h=s.$getSelection();if(s.$isNodeSelection(h)&&!V(d.target)){if(d=h.getNodes(),0<d.length)return d[0].selectPrevious(),!0}else if(s.$isRangeSelection(h)&&(h=s.$getAdjacentNode(h.focus,!0),!d.shiftKey&&s.$isDecoratorNode(h)&&!h.isIsolated()&&!h.isInline()))return h.selectPrevious(),d.preventDefault(),!0;return!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.KEY_ARROW_DOWN_COMMAND,d=>{var h=s.$getSelection();if(s.$isNodeSelection(h)){if(d=h.getNodes(),0<d.length)return d[0].selectNext(0,0),!0}else if(s.$isRangeSelection(h)){let j=h.focus;if(j.key==="root"&&j.offset===s.$getRoot().getChildrenSize())return d.preventDefault(),!0;if(h=s.$getAdjacentNode(h.focus,!1),!d.shiftKey&&s.$isDecoratorNode(h)&&!h.isIsolated()&&!h.isInline())return h.selectNext(),d.preventDefault(),!0}return!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.KEY_ARROW_LEFT_COMMAND,d=>{const h=s.$getSelection();if(s.$isNodeSelection(h)){var j=h.getNodes();if(0<j.length)return d.preventDefault(),j[0].selectPrevious(),!0}return s.$isRangeSelection(h)&&l.$shouldOverrideDefaultCharacterSelection(h,!0)?(j=d.shiftKey,d.preventDefault(),l.$moveCharacter(h,j,!0),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.KEY_ARROW_RIGHT_COMMAND,d=>{const h=s.$getSelection();if(s.$isNodeSelection(h)&&!V(d.target)){var j=h.getNodes();if(0<j.length)return d.preventDefault(),j[0].selectNext(0,0),!0}return s.$isRangeSelection(h)?(j=d.shiftKey,l.$shouldOverrideDefaultCharacterSelection(h,!1)?(d.preventDefault(),l.$moveCharacter(h,j,!1),!0):!1):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.KEY_BACKSPACE_COMMAND,d=>{if(V(d.target))return!1;const h=s.$getSelection();if(!s.$isRangeSelection(h))return!1;d.preventDefault(),{anchor:d}=h;const j=d.getNode();return h.isCollapsed()&&d.offset===0&&!s.$isRootNode(j)&&0<T.$getNearestBlockElementAncestorOrThrow(j).getIndent()?R.dispatchCommand(s.OUTDENT_CONTENT_COMMAND,void 0):R.dispatchCommand(s.DELETE_CHARACTER_COMMAND,!0)},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.KEY_DELETE_COMMAND,d=>{if(V(d.target))return!1;const h=s.$getSelection();return s.$isRangeSelection(h)?(d.preventDefault(),R.dispatchCommand(s.DELETE_CHARACTER_COMMAND,!1)):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.KEY_ENTER_COMMAND,d=>{const h=s.$getSelection();if(!s.$isRangeSelection(h))return!1;if(d!==null){if((m||E||v)&&_)return!1;if(d.preventDefault(),d.shiftKey)return R.dispatchCommand(s.INSERT_LINE_BREAK_COMMAND,!1)}return R.dispatchCommand(s.INSERT_PARAGRAPH_COMMAND,void 0)},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.KEY_ESCAPE_COMMAND,()=>{const d=s.$getSelection();return s.$isRangeSelection(d)?(R.blur(),!0):!1},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.DROP_COMMAND,d=>{const[,h]=z(d);if(0<h.length){var j=I(d.clientX,d.clientY);if(j!==null){const{offset:ae,node:Ee}=j;var ue=s.$getNearestNodeFromDOMNode(Ee);if(ue!==null){if(j=s.$createRangeSelection(),s.$isTextNode(ue))j.anchor.set(ue.getKey(),ae,"text"),j.focus.set(ue.getKey(),ae,"text");else{const b=ue.getParentOrThrow().getKey();ue=ue.getIndexWithinParent()+1,j.anchor.set(b,ue,"element"),j.focus.set(b,ue,"element")}j=s.$normalizeSelection__EXPERIMENTAL(j),s.$setSelection(j)}R.dispatchCommand(c,h)}return d.preventDefault(),!0}return d=s.$getSelection(),!!s.$isRangeSelection(d)},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.DRAGSTART_COMMAND,d=>{[d]=z(d);const h=s.$getSelection();return!(d&&!s.$isRangeSelection(h))},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.DRAGOVER_COMMAND,d=>{var[h]=z(d);const j=s.$getSelection();return h&&!s.$isRangeSelection(j)?!1:(h=I(d.clientX,d.clientY),h!==null&&(h=s.$getNearestNodeFromDOMNode(h.node),s.$isDecoratorNode(h)&&d.preventDefault()),!0)},s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.SELECT_ALL_COMMAND,()=>(s.$selectAll(),!0),s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.COPY_COMMAND,d=>(f.copyToClipboard(R,T.objectKlassEquals(d,ClipboardEvent)?d:null),!0),s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.CUT_COMMAND,d=>(K(d,R),!0),s.COMMAND_PRIORITY_EDITOR),R.registerCommand(s.PASTE_COMMAND,d=>{const[,h,j]=z(d);return 0<h.length&&!j?(R.dispatchCommand(c,h),!0):s.isSelectionCapturedInDecoratorInput(d.target)?!1:s.$getSelection()!==null?(M(d,R),!0):!1},s.COMMAND_PRIORITY_EDITOR))},Te}var Ze,bt;function ar(){return bt||(bt=1,Ze=zr()),Ze}var Ft;function jr(){if(Ft)return qe;Ft=1;var f=Re(),l=Ir(),T=ye(),s=br(),I=Ce(),w=Mr(),O=Hr(),_=ar(),E=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?T.useLayoutEffect:T.useEffect;function m(r){return r.getEditorState().read(s.$canShowPlaceholderCurry(r.isComposing()))}function p(r){let[i,g]=T.useState(()=>m(r));return E(()=>{function a(){let y=m(r);g(y)}return a(),I.mergeRegister(r.registerUpdateListener(()=>{a()}),r.registerEditableListener(()=>{a()}))},[r]),i}function v(r,i){let[g,a]=T.useState(()=>r.getDecorators());return E(()=>r.registerDecoratorListener(y=>{w.flushSync(()=>{a(y)})}),[r]),T.useEffect(()=>{a(r.getDecorators())},[r]),T.useMemo(()=>{let y=[],L=Object.keys(g);for(let M=0;M<L.length;M++){let K=L[M],z=T.createElement(i,{onError:V=>r._onError(V)},T.createElement(T.Suspense,{fallback:null},g[K])),G=r.getElementByKey(K);G!==null&&y.push(w.createPortal(z,G,K))}return y},[i,g,r])}function c(r){E(()=>I.mergeRegister(_.registerRichText(r),O.registerDragonSupport(r)),[r])}function e({content:r}){var[i]=f.useLexicalComposerContext();i=p(i);let g=l();return i?typeof r=="function"?r(g):r:null}return qe.RichTextPlugin=function({contentEditable:r,placeholder:i,ErrorBoundary:g}){let[a]=f.useLexicalComposerContext();return g=v(a,g),c(a),T.createElement(T.Fragment,null,r,T.createElement(e,{content:i}),g)},qe}var et,Kt;function Jr(){return Kt||(Kt=1,et=jr()),et}var En=Jr(),tt={},Bt;function Gr(){if(Bt)return tt;Bt=1;var f=Re(),l=ye();function T(){return T=Object.assign?Object.assign.bind():function(I){for(var w=1;w<arguments.length;w++){var O=arguments[w],_;for(_ in O)Object.prototype.hasOwnProperty.call(O,_)&&(I[_]=O[_])}return I},T.apply(this,arguments)}var s=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?l.useLayoutEffect:l.useEffect;return tt.ContentEditable=function({ariaActiveDescendant:I,ariaAutoComplete:w,ariaControls:O,ariaDescribedBy:_,ariaExpanded:E,ariaLabel:m,ariaLabelledBy:p,ariaMultiline:v,ariaOwns:c,ariaRequired:e,autoCapitalize:r,className:i,id:g,role:a="textbox",spellCheck:y=!0,style:L,tabIndex:M,"data-testid":K,...z}){let[G]=f.useLexicalComposerContext(),[V,R]=l.useState(!1),d=l.useCallback(h=>{G.setRootElement(h)},[G]);return s(()=>(R(G.isEditable()),G.registerEditableListener(h=>{R(h)})),[G]),l.createElement("div",T({},z,{"aria-activedescendant":V?I:void 0,"aria-autocomplete":V?w:"none","aria-controls":V?O:void 0,"aria-describedby":_,"aria-expanded":V&&a==="combobox"?!!E:void 0,"aria-label":m,"aria-labelledby":p,"aria-multiline":v,"aria-owns":V?c:void 0,"aria-readonly":V?void 0:!0,"aria-required":e,autoCapitalize:r,className:i,contentEditable:V,"data-testid":K,id:g,ref:d,role:a,spellCheck:y,style:L,tabIndex:M}))},tt}var rt,Ht;function Xr(){return Ht||(Ht=1,rt=Gr()),rt}var xn=Xr(),ke={},be={},Yt;function Vr(){if(Yt)return be;Yt=1;var f=Ce(),l=pe();function T(I,w,O,_,E){if(I===null||O.size===0&&_.size===0&&!E)return 0;var m=w._selection,p=I._selection;if(E)return 1;if(!(l.$isRangeSelection(m)&&l.$isRangeSelection(p)&&p.isCollapsed()&&m.isCollapsed()))return 0;E=w._nodeMap;let v=[];for(let c of O)O=E.get(c),O!==void 0&&v.push(O);for(let[c,e]of _)e&&(_=E.get(c),_===void 0||l.$isRootNode(_)||v.push(_));return v.length===0?0:1<v.length?(_=w._nodeMap,w=_.get(m.anchor.key),p=_.get(p.anchor.key),w&&p&&!I._nodeMap.has(w.__key)&&l.$isTextNode(w)&&w.__text.length===1&&m.anchor.offset===1?2:0):(w=v[0],I=I._nodeMap.get(w.__key),!l.$isTextNode(I)||!l.$isTextNode(w)||I.__mode!==w.__mode||(I=I.__text,w=w.__text,I===w)||(m=m.anchor,p=p.anchor,m.key!==p.key||m.type!=="text")?0:(m=m.offset,p=p.offset,I=w.length-I.length,I===1&&p===m-1?2:I===-1&&p===m+1?3:I===-1&&p===m?4:0))}function s(I,w){let O=Date.now(),_=0;return(E,m,p,v,c,e)=>{let r=Date.now();if(e.has("historic"))return _=0,O=r,2;let i=T(E,m,v,c,I.isComposing()),g=(()=>{var a=p===null||p.editor===I,y=e.has("history-push");if(!y&&a&&e.has("history-merge"))return 0;if(E===null)return 1;var L=m._selection;if(!(0<v.size||0<c.size))return L!==null?0:2;if(y===!1&&i!==0&&i===_&&r<O+w&&a)return 0;if(v.size===1){{y=Array.from(v)[0],a=E._nodeMap.get(y),y=m._nodeMap.get(y),L=E._selection;let M=m._selection,K=!1;l.$isRangeSelection(L)&&l.$isRangeSelection(M)&&(K=L.anchor.type==="element"&&L.focus.type==="element"&&M.anchor.type==="text"&&M.focus.type==="text"),a=!K&&l.$isTextNode(a)&&l.$isTextNode(y)?a.__type===y.__type&&a.__text===y.__text&&a.__mode===y.__mode&&a.__detail===y.__detail&&a.__style===y.__style&&a.__format===y.__format&&a.__parent===y.__parent:!1}if(a)return 0}return 1})();return O=r,_=i,g}}return be.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}},be.registerHistory=function(I,w,O){let _=s(I,O);O=({editorState:p,prevEditorState:v,dirtyLeaves:c,dirtyElements:e,tags:r})=>{const i=w.current,g=w.redoStack,a=w.undoStack,y=i===null?null:i.editorState;if(i===null||p!==y){if(v=_(v,p,i,c,e,r),v===1)g.length!==0&&(w.redoStack=[],I.dispatchCommand(l.CAN_REDO_COMMAND,!1)),i!==null&&(a.push({...i}),I.dispatchCommand(l.CAN_UNDO_COMMAND,!0));else if(v===2)return;w.current={editor:I,editorState:p}}};let E=f.mergeRegister(I.registerCommand(l.UNDO_COMMAND,()=>{let p=w.redoStack,v=w.undoStack;if(v.length!==0){let c=w.current,e=v.pop();c!==null&&(p.push(c),I.dispatchCommand(l.CAN_REDO_COMMAND,!0)),v.length===0&&I.dispatchCommand(l.CAN_UNDO_COMMAND,!1),w.current=e||null,e&&e.editor.setEditorState(e.editorState,{tag:"historic"})}return!0},l.COMMAND_PRIORITY_EDITOR),I.registerCommand(l.REDO_COMMAND,()=>{let p=w.redoStack;var v=w.undoStack;if(p.length!==0){let c=w.current;c!==null&&(v.push(c),I.dispatchCommand(l.CAN_UNDO_COMMAND,!0)),v=p.pop(),p.length===0&&I.dispatchCommand(l.CAN_REDO_COMMAND,!1),w.current=v||null,v&&v.editor.setEditorState(v.editorState,{tag:"historic"})}return!0},l.COMMAND_PRIORITY_EDITOR),I.registerCommand(l.CLEAR_EDITOR_COMMAND,()=>(w.undoStack=[],w.redoStack=[],w.current=null,!1),l.COMMAND_PRIORITY_EDITOR),I.registerCommand(l.CLEAR_HISTORY_COMMAND,()=>(w.undoStack=[],w.redoStack=[],w.current=null,I.dispatchCommand(l.CAN_REDO_COMMAND,!1),I.dispatchCommand(l.CAN_UNDO_COMMAND,!1),!0),l.COMMAND_PRIORITY_EDITOR),I.registerUpdateListener(O)),m=I.registerUpdateListener(O);return()=>{E(),m()}},be}var nt,qt;function Qr(){return qt||(qt=1,nt=Vr()),nt}var Wt;function Zr(){if(Wt)return ke;Wt=1;var f=Re(),l=Qr(),T=ye();function s(I,w,O=1e3){let _=T.useMemo(()=>w||l.createEmptyHistoryState(),[w]);T.useEffect(()=>l.registerHistory(I,_,O),[O,I,_])}return ke.createEmptyHistoryState=l.createEmptyHistoryState,ke.HistoryPlugin=function({externalHistoryState:I}){let[w]=f.useLexicalComposerContext();return s(w,I),null},ke}var it,Ut;function en(){return Ut||(Ut=1,it=Zr()),it}var vn=en(),ot,zt;function tn(){if(zt)return ot;zt=1;var f=ye();function l(O,_){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,m){return E.__proto__=m,E},l(O,_)}function T(O,_){O.prototype=Object.create(_.prototype),O.prototype.constructor=O,l(O,_)}function s(O,_){return O===void 0&&(O=[]),_===void 0&&(_=[]),O.length!==_.length||O.some(function(E,m){return!Object.is(E,_[m])})}var I={error:null},w=function(O){function _(){for(var m,p=arguments.length,v=Array(p),c=0;c<p;c++)v[c]=arguments[c];return m=O.call.apply(O,[this].concat(v))||this,m.state=I,m.resetErrorBoundary=function(){for(var e,r=arguments.length,i=Array(r),g=0;g<r;g++)i[g]=arguments[g];m.props.onReset==null||(e=m.props).onReset.apply(e,i),m.reset()},m}T(_,O),_.getDerivedStateFromError=function(m){return{error:m}};var E=_.prototype;return E.reset=function(){this.setState(I)},E.componentDidCatch=function(m,p){var v,c;(v=(c=this.props).onError)==null||v.call(c,m,p)},E.componentDidUpdate=function(m,p){var v=this.props.resetKeys;if(this.state.error!==null&&p.error!==null&&s(m.resetKeys,v)){var c,e;(c=(e=this.props).onResetKeysChange)==null||c.call(e,m.resetKeys,v),this.reset()}},E.render=function(){var m=this.state.error,p=this.props,v=p.fallbackRender,c=p.FallbackComponent;if(p=p.fallback,m!==null){if(m={error:m,resetErrorBoundary:this.resetErrorBoundary},f.isValidElement(p))return p;if(typeof v=="function")return v(m);if(c)return f.createElement(c,m);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},_}(f.Component);return ot=function({children:O,onError:_}){return f.createElement(w,{fallback:f.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:_},O)},ot}var lt,jt;function rn(){return jt||(jt=1,lt=tn()),lt}var nn=rn();const Sn=$r(nn);var st={},he={},Jt;function on(){if(Jt)return he;Jt=1;var f=pe(),l=Ce();function T(b){let u=new URLSearchParams;u.append("code",b);for(let C=1;C<arguments.length;C++)u.append("v",arguments[C]);throw Error(`Minified Lexical error #${b}; visit https://lexical.dev/docs/error?${u} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function s(b){let u=1;for(b=b.getParent();b!=null;){if(M(b)){if(b=b.getParent(),h(b)){u++,b=b.getParent();continue}T(40)}break}return u}function I(b){b=b.getParent(),h(b)||T(40);let u=b;for(;u!==null;)u=u.getParent(),h(u)&&(b=u);return b}function w(b){let u=[];b=b.getChildren().filter(M);for(let C=0;C<b.length;C++){let A=b[C],H=A.getFirstChild();h(H)?u=u.concat(w(H)):u.push(A)}return u}function O(b){return M(b)&&h(b.getFirstChild())}function _(b){for(;b.getNextSibling()==null&&b.getPreviousSibling()==null;){let u=b.getParent();if(u==null||!M(b)&&!h(b))break;b=u}b.remove()}function E(b){return L().append(b)}function m(b,u){return M(b)&&(u.length===0||u.length===1&&b.is(u[0])&&b.getChildrenSize()===0)}function p(b,u){b.splice(b.getChildrenSize(),0,u)}function v(b,u){if(h(b))return b;let C=b.getPreviousSibling(),A=b.getNextSibling(),H=L();return H.setFormat(b.getFormatType()),H.setIndent(b.getIndent()),p(H,b.getChildren()),h(C)&&u===C.getListType()?(C.append(H),b.remove(),h(A)&&u===A.getListType()&&(p(C,A.getChildren()),A.remove()),C):h(A)&&u===A.getListType()?(A.getFirstChildOrThrow().insertBefore(H),b.remove(),A):(u=d(u),u.append(H),b.replace(u),e(u),u)}function c(b,u){var C=b.getLastChild();let A=u.getFirstChild();C&&A&&O(C)&&O(A)&&(c(C.getFirstChild(),A.getFirstChild()),A.remove()),C=u.getChildren(),0<C.length&&(b.append(...C),e(b)),u.remove()}function e(b,u){if(b=u||b.getChildren(),b!==void 0)for(u=0;u<b.length;u++){let U=b[u];if(M(U)){let ee=U.getValue();var C=U,A=C.getParent(),H=1;for(A!=null&&(h(A)?H=A.getStart():T(44)),C=C.getPreviousSiblings(),A=0;A<C.length;A++){let N=C[A];M(N)&&!h(N.getFirstChild())&&H++}ee!==H&&U.setValue(H)}}}function r(b){if(!O(b)){var u=b.getParent(),C=u?u.getParent():void 0,A=C?C.getParent():void 0;if(h(A)&&M(C)&&h(u)){var H=u?u.getFirstChild():void 0,U=u?u.getLastChild():void 0;if(b.is(H))C.insertBefore(b),u.isEmpty()&&C.remove();else if(b.is(U))C.insertAfter(b),u.isEmpty()&&C.remove();else{var ee=u.getListType();H=L();let N=d(ee);H.append(N),b.getPreviousSiblings().forEach(S=>N.append(S)),U=L(),ee=d(ee),U.append(ee),p(ee,b.getNextSiblings()),C.insertBefore(H),C.insertAfter(U),C.replace(b)}e(u),e(A)}}}class i extends f.ElementNode{static getType(){return"listitem"}static clone(u){return new i(u.__value,u.__checked,u.__key)}constructor(u,C,A){super(A),this.__value=u===void 0?1:u,this.__checked=C}createDOM(u){let C=document.createElement("li"),A=this.getParent();return h(A)&&A.getListType()==="check"&&a(C,this,null),C.value=this.__value,g(C,u.theme,this),C}updateDOM(u,C,A){let H=this.getParent();return h(H)&&H.getListType()==="check"&&a(C,this,u),C.value=this.__value,g(C,A.theme,this),!1}static transform(){return u=>{let C=u.getParent();h(C)&&(e(C),M(u)||T(144),C.getListType()!=="check"&&u.getChecked()!=null&&u.setChecked(void 0))}}static importDOM(){return{li:()=>({conversion:y,priority:0})}}static importJSON(u){let C=L();return C.setChecked(u.checked),C.setValue(u.value),C.setFormat(u.format),C.setDirection(u.direction),C}exportDOM(u){return u=this.createDOM(u._config),u.style.textAlign=this.getFormatType(),{element:u}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...u){for(let C=0;C<u.length;C++){let A=u[C];if(f.$isElementNode(A)&&this.canMergeWith(A)){let H=A.getChildren();this.append(...H),A.remove()}else super.append(A)}return this}replace(u,C){if(M(u))return super.replace(u);this.setIndent(0);let A=this.getParentOrThrow();if(!h(A))return u;if(A.__first===this.getKey())A.insertBefore(u);else if(A.__last===this.getKey())A.insertAfter(u);else{let H=d(A.getListType()),U=this.getNextSibling();for(;U;){let ee=U;U=U.getNextSibling(),H.append(ee)}A.insertAfter(u),u.insertAfter(H)}return C&&(f.$isElementNode(u)||T(139),this.getChildren().forEach(H=>{u.append(H)})),this.remove(),A.getChildrenSize()===0&&A.remove(),u}insertAfter(u,C=!0){var A=this.getParentOrThrow();h(A)||T(39);var H=this.getNextSiblings();if(M(u))return C=super.insertAfter(u,C),u=u.getParentOrThrow(),h(u)&&e(u),C;if(h(u)){for(A=u,u=u.getChildren(),H=u.length-1;0<=H;H--)A=u[H],this.insertAfter(A,C);return A}if(A.insertAfter(u,C),H.length!==0){let U=d(A.getListType());H.forEach(ee=>U.append(ee)),u.insertAfter(U,C)}return u}remove(u){let C=this.getPreviousSibling(),A=this.getNextSibling();super.remove(u),C&&A&&O(C)&&O(A)?(c(C.getFirstChild(),A.getFirstChild()),A.remove()):A&&(u=A.getParent(),h(u)&&e(u))}insertNewAfter(u,C=!0){return u=L(this.__checked==null?void 0:!1),this.insertAfter(u,C),u}collapseAtStart(u){let C=f.$createParagraphNode();this.getChildren().forEach(ee=>C.append(ee));var A=this.getParentOrThrow(),H=A.getParentOrThrow();let U=M(H);return A.getChildrenSize()===1?U?(A.remove(),H.select()):(A.insertBefore(C),A.remove(),A=u.anchor,u=u.focus,H=C.getKey(),A.type==="element"&&A.getNode().is(this)&&A.set(H,A.offset,"element"),u.type==="element"&&u.getNode().is(this)&&u.set(H,u.offset,"element")):(A.insertBefore(C),this.remove()),!0}getValue(){return this.getLatest().__value}setValue(u){this.getWritable().__value=u}getChecked(){return this.getLatest().__checked}setChecked(u){this.getWritable().__checked=u}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){var u=this.getParent();if(u===null)return this.getLatest().__indent;u=u.getParentOrThrow();let C=0;for(;M(u);)u=u.getParentOrThrow().getParentOrThrow(),C++;return C}setIndent(u){typeof u=="number"&&-1<u||T(117);let C=this.getIndent();for(;C!==u;)if(C<u){e:{var A=new Set;if(O(this)||A.has(this.getKey()))break e;let N=this.getParent();var H=this.getNextSibling(),U=this.getPreviousSibling();if(O(H)&&O(U)){if(U=U.getFirstChild(),h(U)){U.append(this);var ee=H.getFirstChild();h(ee)&&(ee=ee.getChildren(),p(U,ee),H.remove(),A.add(H.getKey())),e(U)}}else O(H)?(H=H.getFirstChild(),h(H)&&(A=H.getFirstChild(),A!==null&&A.insertBefore(this),e(H))):O(U)?(H=U.getFirstChild(),h(H)&&(H.append(this),e(H))):h(N)&&(A=L(),ee=d(N.getListType()),A.append(ee),ee.append(this),U?U.insertAfter(A):H?H.insertBefore(A):N.append(A),e(ee));h(N)&&e(N)}C++}else r(this),C--;return this}insertBefore(u){if(M(u)){let C=this.getParentOrThrow();if(h(C)){let A=this.getNextSiblings();e(C,A)}}return super.insertBefore(u)}canInsertAfter(u){return M(u)}canReplaceWith(u){return M(u)}canMergeWith(u){return f.$isParagraphNode(u)||M(u)}extractWithChild(u,C){if(!f.$isRangeSelection(C))return!1;u=C.anchor.getNode();let A=C.focus.getNode();return this.isParentOf(u)&&this.isParentOf(A)&&this.getTextContent().length===C.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return d("bullet")}}function g(b,u,C){let A=[],H=[];var U=(u=u.list)?u.listitem:void 0;if(u&&u.nested)var ee=u.nested.listitem;if(U!==void 0&&(U=U.split(" "),A.push(...U)),u){U=C.getParent(),U=h(U)&&U.getListType()==="check";let N=C.getChecked();U&&!N||H.push(u.listitemUnchecked),U&&N||H.push(u.listitemChecked),U&&A.push(N?u.listitemChecked:u.listitemUnchecked)}ee!==void 0&&(ee=ee.split(" "),C.getChildren().some(N=>h(N))?A.push(...ee):H.push(...ee)),0<H.length&&l.removeClassNamesFromElement(b,...H),0<A.length&&l.addClassNamesToElement(b,...A)}function a(b,u,C){h(u.getFirstChild())?(b.removeAttribute("role"),b.removeAttribute("tabIndex"),b.removeAttribute("aria-checked")):(b.setAttribute("role","checkbox"),b.setAttribute("tabIndex","-1"),C&&u.__checked===C.__checked||b.setAttribute("aria-checked",u.getChecked()?"true":"false"))}function y(b){return b=l.isHTMLElement(b)&&b.getAttribute("aria-checked")==="true",{node:L(b)}}function L(b){return f.$applyNodeReplacement(new i(void 0,b))}function M(b){return b instanceof i}class K extends f.ElementNode{static getType(){return"list"}static clone(u){return new K(u.__listType||R[u.__tag],u.__start,u.__key)}constructor(u,C,A){super(A),this.__listType=u=R[u]||u,this.__tag=u==="number"?"ol":"ul",this.__start=C}getTag(){return this.__tag}setListType(u){let C=this.getWritable();C.__listType=u,C.__tag=u==="number"?"ol":"ul"}getListType(){return this.__listType}getStart(){return this.__start}createDOM(u){let C=document.createElement(this.__tag);return this.__start!==1&&C.setAttribute("start",String(this.__start)),C.__lexicalListType=this.__listType,z(C,u.theme,this),C}updateDOM(u,C,A){return u.__tag!==this.__tag?!0:(z(C,A.theme,this),!1)}static importDOM(){return{ol:()=>({conversion:V,priority:0}),ul:()=>({conversion:V,priority:0})}}static importJSON(u){let C=d(u.listType,u.start);return C.setFormat(u.format),C.setIndent(u.indent),C.setDirection(u.direction),C}exportDOM(u){return{element:u}=super.exportDOM(u),u&&l.isHTMLElement(u)&&(this.__start!==1&&u.setAttribute("start",String(this.__start)),this.__listType==="check"&&u.setAttribute("__lexicalListType","check")),{element:u}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...u){for(let A=0;A<u.length;A++){var C=u[A];if(M(C))super.append(C);else{let H=L();h(C)||f.$isElementNode(C)&&(C=f.$createTextNode(C.getTextContent())),H.append(C),super.append(H)}}return e(this),this}extractWithChild(u){return M(u)}}function z(b,u,C){let A=[],H=[];var U=u.list;if(U!==void 0){let N=U[`${C.__tag}Depth`]||[];u=s(C)-1;let S=u%N.length;var ee=N[S];let P=U[C.__tag],B,q=U.nested;if(U=U.checklist,q!==void 0&&q.list&&(B=q.list),P!==void 0&&A.push(P),U!==void 0&&C.__listType==="check"&&A.push(U),ee!==void 0)for(ee=ee.split(" "),A.push(...ee),ee=0;ee<N.length;ee++)ee!==S&&H.push(C.__tag+ee);B!==void 0&&(C=B.split(" "),1<u?A.push(...C):H.push(...C))}0<H.length&&l.removeClassNamesFromElement(b,...H),0<A.length&&l.addClassNamesToElement(b,...A)}function G(b){let u=[];for(let A=0;A<b.length;A++){var C=b[A];M(C)?(u.push(C),C=C.getChildren(),1<C.length&&C.forEach(H=>{h(H)&&u.push(E(H))})):u.push(E(C))}return u}function V(b){let u=b.nodeName.toLowerCase(),C=null;return u==="ol"?C=d("number",b.start):u==="ul"&&(C=l.isHTMLElement(b)&&b.getAttribute("__lexicallisttype")==="check"?d("check"):d("bullet")),{after:G,node:C}}let R={ol:"number",ul:"bullet"};function d(b,u=1){return f.$applyNodeReplacement(new K(b,u))}function h(b){return b instanceof K}let j=f.createCommand("INSERT_UNORDERED_LIST_COMMAND"),ue=f.createCommand("INSERT_ORDERED_LIST_COMMAND"),ae=f.createCommand("INSERT_CHECK_LIST_COMMAND"),Ee=f.createCommand("REMOVE_LIST_COMMAND");return he.$createListItemNode=L,he.$createListNode=d,he.$getListDepth=s,he.$handleListInsertParagraph=function(){var b=f.$getSelection();if(!f.$isRangeSelection(b)||!b.isCollapsed()||(b=b.anchor.getNode(),!M(b)||b.getChildrenSize()!==0))return!1;var u=I(b),C=b.getParent();h(C)||T(40);let A=C.getParent(),H;if(f.$isRootOrShadowRoot(A))H=f.$createParagraphNode(),u.insertAfter(H);else if(M(A))H=L(),A.insertAfter(H);else return!1;if(H.select(),u=b.getNextSiblings(),0<u.length){let U=d(C.getListType());f.$isParagraphNode(H)?H.insertAfter(U):(C=L(),C.append(U),H.insertAfter(C)),u.forEach(ee=>{ee.remove(),U.append(ee)})}return _(b),!0},he.$isListItemNode=M,he.$isListNode=h,he.INSERT_CHECK_LIST_COMMAND=ae,he.INSERT_ORDERED_LIST_COMMAND=ue,he.INSERT_UNORDERED_LIST_COMMAND=j,he.ListItemNode=i,he.ListNode=K,he.REMOVE_LIST_COMMAND=Ee,he.insertList=function(b,u){b.update(()=>{var C=f.$getSelection();if(C!==null){var A=C.getNodes();C=C.getStartEndPoints(),C===null&&T(143),[C]=C,C=C.getNode();var H=C.getParent();if(m(C,A))A=d(u),f.$isRootOrShadowRoot(H)?(C.replace(A),H=L(),f.$isElementNode(C)&&(H.setFormat(C.getFormatType()),H.setIndent(C.getIndent())),A.append(H)):M(C)&&(C=C.getParentOrThrow(),p(A,C.getChildren()),C.replace(A));else for(C=new Set,H=0;H<A.length;H++){var U=A[H];if(f.$isElementNode(U)&&U.isEmpty()&&!M(U)&&!C.has(U.getKey()))v(U,u);else if(f.$isLeafNode(U))for(U=U.getParent();U!=null;){let N=U.getKey();if(h(U)){if(!C.has(N)){var ee=d(u);p(ee,U.getChildren()),U.replace(ee),e(ee),C.add(N)}break}else{if(ee=U.getParent(),f.$isRootOrShadowRoot(ee)&&!C.has(N)){C.add(N),v(U,u);break}U=ee}}}}})},he.removeList=function(b){b.update(()=>{let u=f.$getSelection();if(f.$isRangeSelection(u)){var C=new Set,A=u.getNodes(),H=u.anchor.getNode();if(m(H,A))C.add(I(H));else for(H=0;H<A.length;H++){var U=A[H];f.$isLeafNode(U)&&(U=l.$getNearestNodeOfType(U,i),U!=null&&C.add(I(U)))}for(let ee of C){C=ee,A=w(ee);for(let N of A)A=f.$createParagraphNode(),p(A,N.getChildren()),C.insertAfter(A),C=A,N.__key===u.anchor.key&&u.anchor.set(A.getKey(),0,"element"),N.__key===u.focus.key&&u.focus.set(A.getKey(),0,"element"),N.remove();ee.remove()}}})},he}var at,Gt;function ur(){return Gt||(Gt=1,at=on()),at}var Xt;function ln(){if(Xt)return st;Xt=1;var f=ur(),l=Re(),T=ye(),s=Ce(),I=pe();function w(O){T.useEffect(()=>s.mergeRegister(O.registerCommand(f.INSERT_ORDERED_LIST_COMMAND,()=>(f.insertList(O,"number"),!0),I.COMMAND_PRIORITY_LOW),O.registerCommand(f.INSERT_UNORDERED_LIST_COMMAND,()=>(f.insertList(O,"bullet"),!0),I.COMMAND_PRIORITY_LOW),O.registerCommand(f.REMOVE_LIST_COMMAND,()=>(f.removeList(O),!0),I.COMMAND_PRIORITY_LOW),O.registerCommand(I.INSERT_PARAGRAPH_COMMAND,()=>!!f.$handleListInsertParagraph(),I.COMMAND_PRIORITY_LOW)),[O])}return st.ListPlugin=function(){let[O]=l.useLexicalComposerContext();return T.useEffect(()=>{if(!O.hasNodes([f.ListNode,f.ListItemNode]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[O]),w(O),null},st}var ut,Vt;function sn(){return Vt||(Vt=1,ut=ln()),ut}var yn=sn(),dt={},Se={},Qt;function an(){if(Qt)return Se;Qt=1;var f=Ce(),l=pe();let T=new Set(["http:","https:","mailto:","sms:","tel:"]);class s extends l.ElementNode{static getType(){return"link"}static clone(c){return new s(c.__url,{rel:c.__rel,target:c.__target,title:c.__title},c.__key)}constructor(c,e={},r){super(r);let{target:i=null,rel:g=null,title:a=null}=e;this.__url=c,this.__target=i,this.__rel=g,this.__title=a}createDOM(c){let e=document.createElement("a");return e.href=this.sanitizeUrl(this.__url),this.__target!==null&&(e.target=this.__target),this.__rel!==null&&(e.rel=this.__rel),this.__title!==null&&(e.title=this.__title),f.addClassNamesToElement(e,c.theme.link),e}updateDOM(c,e){let r=this.__url,i=this.__target,g=this.__rel,a=this.__title;return r!==c.__url&&(e.href=r),i!==c.__target&&(i?e.target=i:e.removeAttribute("target")),g!==c.__rel&&(g?e.rel=g:e.removeAttribute("rel")),a!==c.__title&&(a?e.title=a:e.removeAttribute("title")),!1}static importDOM(){return{a:()=>({conversion:I,priority:1})}}static importJSON(c){let e=w(c.url,{rel:c.rel,target:c.target,title:c.title});return e.setFormat(c.format),e.setIndent(c.indent),e.setDirection(c.direction),e}sanitizeUrl(c){try{let e=new URL(c);if(!T.has(e.protocol))return"about:blank"}catch{}return c}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(c){this.getWritable().__url=c}getTarget(){return this.getLatest().__target}setTarget(c){this.getWritable().__target=c}getRel(){return this.getLatest().__rel}setRel(c){this.getWritable().__rel=c}getTitle(){return this.getLatest().__title}setTitle(c){this.getWritable().__title=c}insertNewAfter(c,e=!0){return c=w(this.__url,{rel:this.__rel,target:this.__target,title:this.__title}),this.insertAfter(c,e),c}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(c,e){if(!l.$isRangeSelection(e))return!1;c=e.anchor.getNode();let r=e.focus.getNode();return this.isParentOf(c)&&this.isParentOf(r)&&0<e.getTextContent().length}}function I(v){let c=null;if(f.isHTMLAnchorElement(v)){let e=v.textContent;(e!==null&&e!==""||0<v.children.length)&&(c=w(v.getAttribute("href")||"",{rel:v.getAttribute("rel"),target:v.getAttribute("target"),title:v.getAttribute("title")}))}return{node:c}}function w(v,c){return l.$applyNodeReplacement(new s(v,c))}function O(v){return v instanceof s}class _ extends s{static getType(){return"autolink"}static clone(c){return new _(c.__url,{rel:c.__rel,target:c.__target,title:c.__title},c.__key)}static importJSON(c){let e=E(c.url,{rel:c.rel,target:c.target,title:c.title});return e.setFormat(c.format),e.setIndent(c.indent),e.setDirection(c.direction),e}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:"autolink",version:1}}insertNewAfter(c,e=!0){return c=this.getParentOrThrow().insertNewAfter(c,e),l.$isElementNode(c)?(e=E(this.__url,{rel:this.__rel,target:this.__target,title:this.__title}),c.append(e),e):null}}function E(v,c){return l.$applyNodeReplacement(new _(v,c))}let m=l.createCommand("TOGGLE_LINK_COMMAND");function p(v,c){for(;v!==null&&v.getParent()!==null&&!c(v);)v=v.getParentOrThrow();return c(v)?v:null}return Se.$createAutoLinkNode=E,Se.$createLinkNode=w,Se.$isAutoLinkNode=function(v){return v instanceof _},Se.$isLinkNode=O,Se.AutoLinkNode=_,Se.LinkNode=s,Se.TOGGLE_LINK_COMMAND=m,Se.toggleLink=function(v,c={}){let{target:e,title:r}=c,i=c.rel===void 0?"noreferrer":c.rel;if(c=l.$getSelection(),l.$isRangeSelection(c))if(c=c.extract(),v===null)c.forEach(g=>{if(g=g.getParent(),O(g)){let a=g.getChildren();for(let y=0;y<a.length;y++)g.insertBefore(a[y]);g.remove()}});else{if(c.length===1){let y=p(c[0],O);if(y!==null){y.setURL(v),e!==void 0&&y.setTarget(e),i!==null&&y.setRel(i),r!==void 0&&y.setTitle(r);return}}let g=null,a=null;c.forEach(y=>{var L=y.getParent();if(L!==a&&L!==null&&(!l.$isElementNode(y)||y.isInline()))if(O(L))a=L,L.setURL(v),e!==void 0&&L.setTarget(e),i!==null&&a.setRel(i),r!==void 0&&a.setTitle(r);else if(L.is(g)||(g=L,a=w(v,{rel:i,target:e,title:r}),O(L)?y.getPreviousSibling()===null?L.insertBefore(a):L.insertAfter(a):y.insertBefore(a)),O(y)){if(!y.is(a)){if(a!==null){L=y.getChildren();for(let M=0;M<L.length;M++)a.append(L[M])}y.remove()}}else a!==null&&a.append(y)})}},Se}var ct,Zt;function dr(){return Zt||(Zt=1,ct=an()),ct}var er;function un(){if(er)return dt;er=1;var f=dr(),l=Re(),T=Ce(),s=pe(),I=ye();return dt.LinkPlugin=function({validateUrl:w}){let[O]=l.useLexicalComposerContext();return I.useEffect(()=>{if(!O.hasNodes([f.LinkNode]))throw Error("LinkPlugin: LinkNode not registered on editor");return T.mergeRegister(O.registerCommand(f.TOGGLE_LINK_COMMAND,_=>{if(_===null)return f.toggleLink(_),!0;if(typeof _=="string")return w===void 0||w(_)?(f.toggleLink(_),!0):!1;let{url:E,target:m,rel:p,title:v}=_;return f.toggleLink(E,{rel:p,target:m,title:v}),!0},s.COMMAND_PRIORITY_LOW),w!==void 0?O.registerCommand(s.PASTE_COMMAND,_=>{let E=s.$getSelection();if(!s.$isRangeSelection(E)||E.isCollapsed()||!(_ instanceof ClipboardEvent)||_.clipboardData==null)return!1;let m=_.clipboardData.getData("text");return w(m)?E.getNodes().some(p=>s.$isElementNode(p))?!1:(O.dispatchCommand(f.TOGGLE_LINK_COMMAND,m),_.preventDefault(),!0):!1},s.COMMAND_PRIORITY_LOW):()=>{})},[O,w]),null},dt}var gt,tr;function dn(){return tr||(tr=1,gt=un()),gt}var On=dn(),ft={},se={},rr;function cn(){if(rr)return se;rr=1;var f=Ce(),l=pe();let T=/^(\d+(?:\.\d+)?)px$/,s={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};class I extends l.ElementNode{static getType(){return"tablecell"}static clone(t){let o=new I(t.__headerState,t.__colSpan,t.__width,t.__key);return o.__rowSpan=t.__rowSpan,o.__backgroundColor=t.__backgroundColor,o}static importDOM(){return{td:()=>({conversion:w,priority:0}),th:()=>({conversion:w,priority:0})}}static importJSON(t){let o=t.rowSpan||1,x=O(t.headerState,t.colSpan||1,t.width||void 0);return x.__rowSpan=o,x.__backgroundColor=t.backgroundColor||null,x}constructor(t=s.NO_STATUS,o=1,x,$){super($),this.__colSpan=o,this.__rowSpan=1,this.__headerState=t,this.__width=x,this.__backgroundColor=null}createDOM(t){let o=document.createElement(this.getTag());return this.__width&&(o.style.width=`${this.__width}px`),1<this.__colSpan&&(o.colSpan=this.__colSpan),1<this.__rowSpan&&(o.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(o.style.backgroundColor=this.__backgroundColor),f.addClassNamesToElement(o,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),o}exportDOM(t){if({element:t}=super.exportDOM(t),t){var o=this.getParentOrThrow().getChildrenSize();t.style.border="1px solid black",1<this.__colSpan&&(t.colSpan=this.__colSpan),1<this.__rowSpan&&(t.rowSpan=this.__rowSpan),t.style.width=`${this.getWidth()||Math.max(90,700/o)}px`,t.style.verticalAlign="top",t.style.textAlign="start",o=this.getBackgroundColor(),o!==null?t.style.backgroundColor=o:this.hasHeader()&&(t.style.backgroundColor="#f2f3f5")}return{element:t}}exportJSON(){return{...super.exportJSON(),backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,type:"tablecell",width:this.getWidth()}}getColSpan(){return this.__colSpan}setColSpan(t){return this.getWritable().__colSpan=t,this}getRowSpan(){return this.__rowSpan}setRowSpan(t){return this.getWritable().__rowSpan=t,this}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t){return this.getWritable().__headerState=t,this.__headerState}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){return this.getWritable().__width=t,this.__width}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){this.getWritable().__backgroundColor=t}toggleHeaderStyle(t){let o=this.getWritable();return o.__headerState=(o.__headerState&t)===t?o.__headerState-t:o.__headerState+t,o}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==s.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function w(n){var t=n.nodeName.toLowerCase();let o;return T.test(n.style.width)&&(o=parseFloat(n.style.width)),t=O(t==="th"?s.ROW:s.NO_STATUS,n.colSpan,o),t.__rowSpan=n.rowSpan,n=n.style.backgroundColor,n!==""&&(t.__backgroundColor=n),{forChild:(x,$)=>_($)&&!l.$isElementNode(x)?($=l.$createParagraphNode(),l.$isLineBreakNode(x)&&x.getTextContent()===`
`?null:($.append(x),$)):x,node:t}}function O(n,t=1,o){return l.$applyNodeReplacement(new I(n,t,o))}function _(n){return n instanceof I}let E=l.createCommand("INSERT_TABLE_COMMAND");class m extends l.ElementNode{static getType(){return"tablerow"}static clone(t){return new m(t.__height,t.__key)}static importDOM(){return{tr:()=>({conversion:p,priority:0})}}static importJSON(t){return v(t.height)}constructor(t,o){super(o),this.__height=t}exportJSON(){return{...super.exportJSON(),type:"tablerow",version:1}}createDOM(t){let o=document.createElement("tr");return this.__height&&(o.style.height=`${this.__height}px`),f.addClassNamesToElement(o,t.theme.tableRow),o}isShadowRoot(){return!0}setHeight(t){return this.getWritable().__height=t,this.__height}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function p(n){let t;return T.test(n.style.height)&&(t=parseFloat(n.style.height)),{node:v(t)}}function v(n){return l.$applyNodeReplacement(new m(n))}function c(n){return n instanceof m}function e(n){let t=new URLSearchParams;t.append("code",n);for(let o=1;o<arguments.length;o++)t.append("v",arguments[o]);throw Error(`Minified Lexical error #${n}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let r=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function i(n){if(n=f.$findMatchingParent(n,t=>c(t)),c(n))return n;throw Error("Expected table cell to be inside of table row.")}function g(n){if(n=f.$findMatchingParent(n,t=>le(t)),le(n))return n;throw Error("Expected table cell to be inside of table.")}function a(n,t){let o=g(n),{x,y:$}=o.getCordsFromCellNode(n,t);return{above:o.getCellNodeFromCords(x,$-1,t),below:o.getCellNodeFromCords(x,$+1,t),left:o.getCellNodeFromCords(x-1,$,t),right:o.getCellNodeFromCords(x+1,$,t)}}let y=(n,t)=>n===s.BOTH||n===t?t:s.NO_STATUS;function L(n){let t=n.getFirstDescendant();t==null?n.selectStart():t.getParentOrThrow().selectStart()}function M(n,t){let o=n.getFirstChild();o!==null?o.insertBefore(t):n.append(t)}function K(n,t,o){let x=[],$=null,k=null;n=n.getChildren();for(let F=0;F<n.length;F++){var D=n[F];c(D)||e(146);var W=D.getChildren();D=0;for(let Y of W){for(_(Y)||e(147);x[F]!==void 0&&x[F][D]!==void 0;)D++;W=F;var Z=D,re=Y;let J={cell:re,startColumn:Z,startRow:W},X=re.__rowSpan,ne=re.__colSpan;for(let Q=0;Q<X;Q++){x[W+Q]===void 0&&(x[W+Q]=[]);for(let de=0;de<ne;de++)x[W+Q][Z+de]=J}t.is(re)&&($=J),o.is(re)&&(k=J),D+=Y.__colSpan}}return $===null&&e(110),k===null&&e(111),[x,$,k]}function z(n){n instanceof I||("__type"in n?(n=f.$findMatchingParent(n,_),_(n)||e(148)):(n=f.$findMatchingParent(n.getNode(),_),_(n)||e(148)));let t=n.getParent();c(t)||e(149);let o=t.getParent();return le(o)||e(150),[n,t,o]}function G(n){let[t,,o]=z(n);n=o.getChildren();let x=n.length;var $=n[0].getChildren().length;let k=Array(x);for(var D=0;D<x;D++)k[D]=Array($);for($=0;$<x;$++){D=n[$].getChildren();let W=0;for(let Z=0;Z<D.length;Z++){for(;k[$][W];)W++;let re=D[Z],F=re.__rowSpan||1,Y=re.__colSpan||1;for(let J=0;J<F;J++)for(let X=0;X<Y;X++)k[$+J][W+X]=re;if(t===re)return{colSpan:Y,columnIndex:W,rowIndex:$,rowSpan:F};W+=Y}}return null}class V{constructor(t,o,x){this.anchor=o,this.focus=x,o._selection=this,x._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=t}getStartEndPoints(){return[this.anchor,this.focus]}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return R(t)?this.tableKey===t.tableKey&&this.anchor.is(t.anchor)&&this.focus.is(t.focus):!1}set(t,o,x){this.dirty=!0,this.tableKey=t,this.anchor.key=o,this.focus.key=x,this._cachedNodes=null}clone(){return new V(this.tableKey,this.anchor,this.focus)}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(t){let o=this.focus.getNode();l.$isElementNode(o)||e(151),l.$normalizeSelection__EXPERIMENTAL(o.select(0,o.getChildrenSize())).insertNodes(t)}getShape(){var t=l.$getNodeByKey(this.anchor.key);_(t)||e(152),t=G(t),t===null&&e(153);var o=l.$getNodeByKey(this.focus.key);_(o)||e(154);let x=G(o);x===null&&e(155),o=Math.min(t.columnIndex,x.columnIndex);let $=Math.max(t.columnIndex,x.columnIndex),k=Math.min(t.rowIndex,x.rowIndex);return t=Math.max(t.rowIndex,x.rowIndex),{fromX:Math.min(o,$),fromY:Math.min(k,t),toX:Math.max(o,$),toY:Math.max(k,t)}}getNodes(){function t(de){let{cell:_e,startColumn:me,startRow:xe}=de;re=Math.min(re,me),F=Math.min(F,xe),Y=Math.max(Y,me+_e.__colSpan-1),J=Math.max(J,xe+_e.__rowSpan-1)}var o=this._cachedNodes;if(o!==null)return o;var x=this.anchor.getNode();o=this.focus.getNode();var $=f.$findMatchingParent(x,_);x=f.$findMatchingParent(o,_),_($)||e(152),_(x)||e(154),o=$.getParent(),c(o)||e(156),o=o.getParent(),le(o)||e(157);var k=x.getParents()[1];if(k!==o)return o.isParentOf(x)?(o=k.getParent(),o==null&&e(159),this.set(this.tableKey,x.getKey(),o.getKey())):(o=o.getParent(),o==null&&e(158),this.set(this.tableKey,o.getKey(),x.getKey())),this.getNodes();let[D,W,Z]=K(o,$,x),re=Math.min(W.startColumn,Z.startColumn),F=Math.min(W.startRow,Z.startRow),Y=Math.max(W.startColumn+W.cell.__colSpan-1,Z.startColumn+Z.cell.__colSpan-1),J=Math.max(W.startRow+W.cell.__rowSpan-1,Z.startRow+Z.cell.__rowSpan-1);x=re,$=F,k=re;for(var X=F;re<x||F<$||Y>k||J>X;){if(re<x){var ne=X-$;--x;for(var Q=0;Q<=ne;Q++)t(D[$+Q][x])}if(F<$)for(ne=k-x,--$,Q=0;Q<=ne;Q++)t(D[$][x+Q]);if(Y>k)for(ne=X-$,k+=1,Q=0;Q<=ne;Q++)t(D[$+Q][k]);if(J>X)for(ne=k-x,X+=1,Q=0;Q<=ne;Q++)t(D[X][x+Q])}for(o=[o],x=null,$=F;$<=J;$++)for(k=re;k<=Y;k++)({cell:X}=D[$][k]),ne=X.getParent(),c(ne)||e(160),ne!==x&&o.push(ne),o.push(X,...h(X)),x=ne;return l.isCurrentlyReadOnlyMode()||(this._cachedNodes=o),o}getTextContent(){let t=this.getNodes(),o="";for(let x=0;x<t.length;x++)o+=t[x].getTextContent();return o}}function R(n){return n instanceof V}function d(){let n=l.$createPoint("root",0,"element"),t=l.$createPoint("root",0,"element");return new V("root",n,t)}function h(n){let t=[],o=[n];for(;0<o.length;){let x=o.pop();x===void 0&&e(112),l.$isElementNode(x)&&o.unshift(...x.getChildren()),x!==n&&t.push(x)}return t}class j{constructor(t,o){this.isHighlightingCells=!1,this.focusY=this.focusX=this.anchorY=this.anchorX=-1,this.listenersToRemove=new Set,this.tableNodeKey=o,this.editor=t,this.table={columns:0,domRows:[],rows:0},this.focusCell=this.anchorCell=this.focusCellNodeKey=this.anchorCellNodeKey=this.tableSelection=null,this.hasHijackedSelectionStyles=!1,this.trackTable()}getTable(){return this.table}removeListeners(){Array.from(this.listenersToRemove).forEach(t=>t())}trackTable(){let t=new MutationObserver(o=>{this.editor.update(()=>{var x=!1;for(let $=0;$<o.length;$++){const k=o[$].target.nodeName;if(k==="TABLE"||k==="TR"){x=!0;break}}if(x){if(x=this.editor.getElementByKey(this.tableNodeKey),!x)throw Error("Expected to find TableElement in DOM");this.table=ae(x)}})});this.editor.update(()=>{let o=this.editor.getElementByKey(this.tableNodeKey);if(!o)throw Error("Expected to find TableElement in DOM");this.table=ae(o),t.observe(o,{childList:!0,subtree:!0})})}clearHighlight(){let t=this.editor;this.isHighlightingCells=!1,this.focusY=this.focusX=this.anchorY=this.anchorX=-1,this.focusCell=this.anchorCell=this.focusCellNodeKey=this.anchorCellNodeKey=this.tableSelection=null,this.hasHijackedSelectionStyles=!1,this.enableHighlightStyle(),t.update(()=>{var o=l.$getNodeByKey(this.tableNodeKey);if(!le(o))throw Error("Expected TableNode.");if(o=t.getElementByKey(this.tableNodeKey),!o)throw Error("Expected to find TableElement in DOM");o=ae(o),Ee(t,o,null),l.$setSelection(null),t.dispatchCommand(l.SELECTION_CHANGE_COMMAND,void 0)})}enableHighlightStyle(){let t=this.editor;t.update(()=>{let o=t.getElementByKey(this.tableNodeKey);if(!o)throw Error("Expected to find TableElement in DOM");f.removeClassNamesFromElement(o,t._config.theme.tableSelection),o.classList.remove("disable-selection"),this.hasHijackedSelectionStyles=!1})}disableHighlightStyle(){let t=this.editor;t.update(()=>{let o=t.getElementByKey(this.tableNodeKey);if(!o)throw Error("Expected to find TableElement in DOM");f.addClassNamesToElement(o,t._config.theme.tableSelection),this.hasHijackedSelectionStyles=!0})}updateTableTableSelection(t){if(t!==null&&t.tableKey===this.tableNodeKey){let o=this.editor;this.tableSelection=t,this.isHighlightingCells=!0,this.disableHighlightStyle(),Ee(o,this.table,this.tableSelection)}else t==null?this.clearHighlight():(this.tableNodeKey=t.tableKey,this.updateTableTableSelection(t))}setFocusCellForSelection(t,o=!1){let x=this.editor;x.update(()=>{var $=l.$getNodeByKey(this.tableNodeKey);if(!le($))throw Error("Expected TableNode.");if(!x.getElementByKey(this.tableNodeKey))throw Error("Expected to find TableElement in DOM");$=t.x;let k=t.y;if(this.focusCell=t,this.anchorCell!==null){let D=r?(x._window||window).getSelection():null;D&&D.setBaseAndExtent(this.anchorCell.elem,0,this.focusCell.elem,0)}if(!this.isHighlightingCells&&(this.anchorX!==$||this.anchorY!==k||o))this.isHighlightingCells=!0,this.disableHighlightStyle();else if($===this.focusX&&k===this.focusY)return;this.focusX=$,this.focusY=k,this.isHighlightingCells&&($=l.$getNearestNodeFromDOMNode(t.elem),this.tableSelection!=null&&this.anchorCellNodeKey!=null&&_($)&&($=$.getKey(),this.tableSelection=this.tableSelection.clone()||d(),this.focusCellNodeKey=$,this.tableSelection.set(this.tableNodeKey,this.anchorCellNodeKey,this.focusCellNodeKey),l.$setSelection(this.tableSelection),x.dispatchCommand(l.SELECTION_CHANGE_COMMAND,void 0),Ee(x,this.table,this.tableSelection)))})}setAnchorCellForSelection(t){this.isHighlightingCells=!1,this.anchorCell=t,this.anchorX=t.x,this.anchorY=t.y,this.editor.update(()=>{var o=l.$getNearestNodeFromDOMNode(t.elem);_(o)&&(o=o.getKey(),this.tableSelection=this.tableSelection!=null?this.tableSelection.clone():d(),this.anchorCellNodeKey=o)})}formatCells(t){this.editor.update(()=>{let o=l.$getSelection();R(o)||e(11);let x=l.$createRangeSelection(),$=x.anchor,k=x.focus;o.getNodes().forEach(D=>{_(D)&&D.getTextContentSize()!==0&&($.set(D.getKey(),0,"element"),k.set(D.getKey(),D.getChildrenSize(),"element"),x.formatText(t))}),l.$setSelection(o),this.editor.dispatchCommand(l.SELECTION_CHANGE_COMMAND,void 0)})}clearText(){let t=this.editor;t.update(()=>{let o=l.$getNodeByKey(this.tableNodeKey);if(!le(o))throw Error("Expected TableNode.");var x=l.$getSelection();R(x)||e(11),x=x.getNodes().filter(_),x.length===this.table.columns*this.table.rows?(o.selectPrevious(),o.remove(),l.$getRoot().selectStart()):(x.forEach($=>{if(l.$isElementNode($)){let k=l.$createParagraphNode(),D=l.$createTextNode();k.append(D),$.append(k),$.getChildren().forEach(W=>{W!==k&&W.remove()})}}),Ee(t,this.table,null),l.$setSelection(null),t.dispatchCommand(l.SELECTION_CHANGE_COMMAND,void 0))})}}function ue(n){for(;n!=null;){let t=n.nodeName;if(t==="TD"||t==="TH"){if(n=n._cell,n===void 0)break;return n}n=n.parentNode}return null}function ae(n){let t=[],o={columns:0,domRows:t,rows:0};var x=n.firstChild;let $=n=0;for(t.length=0;x!=null;){var k=x.nodeName;if(k==="TD"||k==="TH"){k=x,k={elem:k,hasBackgroundColor:k.style.backgroundColor!=="",highlighted:!1,x:n,y:$},x._cell=k;let D=t[$];D===void 0&&(D=t[$]=[]),D[n]=k}else if(k=x.firstChild,k!=null){x=k;continue}if(k=x.nextSibling,k!=null)n++,x=k;else if(k=x.parentNode,k!=null){if(x=k.nextSibling,x==null)break;$++,n=0}}return o.columns=n+1,o.rows=$+1,o}function Ee(n,t,o){let x=new Set(o?o.getNodes():[]);b(t,($,k)=>{let D=$.elem;x.has(k)?($.highlighted=!0,ee(n,$)):($.highlighted=!1,N(n,$),D.getAttribute("style")||D.removeAttribute("style"))})}function b(n,t){({domRows:n}=n);for(let o=0;o<n.length;o++){let x=n[o];if(x)for(let $=0;$<x.length;$++){let k=x[$];if(!k)continue;let D=l.$getNearestNodeFromDOMNode(k.elem);D!==null&&t(k,D,{x:$,y:o})}}}function u(n,t){t.disableHighlightStyle(),b(t.table,o=>{o.highlighted=!0,ee(n,o)})}function C(n,t){t.enableHighlightStyle(),b(t.table,o=>{let x=o.elem;o.highlighted=!1,N(n,o),x.getAttribute("style")||x.removeAttribute("style")})}let A=(n,t,o,x,$)=>{const k=$==="forward";switch($){case"backward":case"forward":return o!==(k?n.table.columns-1:0)?(n=t.getCellNodeFromCordsOrThrow(o+(k?1:-1),x,n.table),k?n.selectStart():n.selectEnd()):x!==(k?n.table.rows-1:0)?(n=t.getCellNodeFromCordsOrThrow(k?0:n.table.columns-1,x+(k?1:-1),n.table),k?n.selectStart():n.selectEnd()):k?t.selectNext():t.selectPrevious(),!0;case"up":return x!==0?t.getCellNodeFromCordsOrThrow(o,x-1,n.table).selectEnd():t.selectPrevious(),!0;case"down":return x!==n.table.rows-1?t.getCellNodeFromCordsOrThrow(o,x+1,n.table).selectStart():t.selectNext(),!0;default:return!1}},H=(n,t,o,x,$)=>{const k=$==="forward";switch($){case"backward":case"forward":return o!==(k?n.table.columns-1:0)&&n.setFocusCellForSelection(t.getDOMCellFromCordsOrThrow(o+(k?1:-1),x,n.table)),!0;case"up":return x!==0?(n.setFocusCellForSelection(t.getDOMCellFromCordsOrThrow(o,x-1,n.table)),!0):!1;case"down":return x!==n.table.rows-1?(n.setFocusCellForSelection(t.getDOMCellFromCordsOrThrow(o,x+1,n.table)),!0):!1;default:return!1}};function U(n,t){if(l.$isRangeSelection(n)||R(n)){let o=t.isParentOf(n.anchor.getNode());return n=t.isParentOf(n.focus.getNode()),o&&n}return!1}function ee(n,t){n=t.elem,t=l.$getNearestNodeFromDOMNode(n),_(t)||e(131),t.getBackgroundColor()===null?n.style.setProperty("background-color","rgb(172,206,247)"):n.style.setProperty("background-image","linear-gradient(to right, rgba(172,206,247,0.85), rgba(172,206,247,0.85))"),n.style.setProperty("caret-color","transparent")}function N(n,t){n=t.elem,t=l.$getNearestNodeFromDOMNode(n),_(t)||e(131),t.getBackgroundColor()===null&&n.style.removeProperty("background-color"),n.style.removeProperty("background-image"),n.style.removeProperty("caret-color")}function S(n){return n=f.$findMatchingParent(n,_),_(n)?n:null}function P(n){return n=f.$findMatchingParent(n,le),le(n)?n:null}function B(n,t,o,x,$){let k=l.$getSelection();if(!U(k,x))return!1;if(l.$isRangeSelection(k)&&k.isCollapsed()){if(o==="backward"||o==="forward")return!1;let{anchor:re,focus:F}=k;var D=f.$findMatchingParent(re.getNode(),_),W=f.$findMatchingParent(F.getNode(),_);if(!_(D)||!D.is(W))return!1;if(W=P(D),W!==x&&W!=null){var Z=n.getElementByKey(W.getKey());if(Z!=null)return $.table=ae(Z),B(n,t,o,W,$)}if(W=n.getElementByKey(D.__key),Z=n.getElementByKey(re.key),Z==null||W==null)return!1;if(re.type==="element")W=Z.getBoundingClientRect();else{if(W=window.getSelection(),W===null||W.rangeCount===0)return!1;W=W.getRangeAt(0).getBoundingClientRect()}if(Z=o==="up"?D.getFirstChild():D.getLastChild(),Z==null||(n=n.getElementByKey(Z.__key),n==null))return!1;if(n=n.getBoundingClientRect(),o==="up"?n.top>W.top-W.height:W.bottom+W.height>n.bottom){if(q(t),n=x.getCordsFromCellNode(D,$.table),t.shiftKey)o=x.getDOMCellFromCordsOrThrow(n.x,n.y,$.table),$.setAnchorCellForSelection(o),$.setFocusCellForSelection(o,!0);else return A($,x,n.x,n.y,o);return!0}}else if(R(k)){let{anchor:re,focus:F}=k;return Z=f.$findMatchingParent(re.getNode(),_),W=f.$findMatchingParent(F.getNode(),_),[D]=k.getNodes(),n=n.getElementByKey(D.getKey()),!_(Z)||!_(W)||!le(D)||n==null?!1:($.updateTableTableSelection(k),n=ae(n),Z=x.getCordsFromCellNode(Z,n),Z=x.getDOMCellFromCordsOrThrow(Z.x,Z.y,n),$.setAnchorCellForSelection(Z),q(t),t.shiftKey?(t=x.getCordsFromCellNode(W,n),H($,D,t.x,t.y,o)):(W.selectEnd(),!0))}return!1}function q(n){n.preventDefault(),n.stopImmediatePropagation(),n.stopPropagation()}class te extends l.ElementNode{static getType(){return"table"}static clone(t){return new te(t.__key)}static importDOM(){return{table:()=>({conversion:oe,priority:1})}}static importJSON(){return ie()}constructor(t){super(t)}exportJSON(){return{...super.exportJSON(),type:"table",version:1}}createDOM(t){let o=document.createElement("table");return f.addClassNamesToElement(o,t.theme.table),o}updateDOM(){return!1}exportDOM(t){return{...super.exportDOM(t),after:o=>{if(o){let x=o.cloneNode(),$=document.createElement("colgroup"),k=document.createElement("tbody");if(f.isHTMLElement(o)&&k.append(...o.children),o=this.getFirstChildOrThrow(),!c(o))throw Error("Expected to find row node.");o=o.getChildrenSize();for(let D=0;D<o;D++){let W=document.createElement("col");$.append(W)}return x.replaceChildren($,k),x}}}}canExtractContents(){return!1}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,o){let{rows:x,domRows:$}=o;for(o=0;o<x;o++){var k=$[o];if(k!=null&&(k=k.findIndex(D=>{if(D)return{elem:D}=D,l.$getNearestNodeFromDOMNode(D)===t}),k!==-1))return{x:k,y:o}}throw Error("Cell not found in table.")}getDOMCellFromCords(t,o,x){return{domRows:x}=x,o=x[o],o==null?null:(t=o[t],t??null)}getDOMCellFromCordsOrThrow(t,o,x){if(t=this.getDOMCellFromCords(t,o,x),!t)throw Error("Cell not found at cords.");return t}getCellNodeFromCords(t,o,x){return t=this.getDOMCellFromCords(t,o,x),t==null?null:(t=l.$getNearestNodeFromDOMNode(t.elem),_(t)?t:null)}getCellNodeFromCordsOrThrow(t,o,x){if(t=this.getCellNodeFromCords(t,o,x),!t)throw Error("Node at cords not TableCellNode.");return t}canSelectBefore(){return!0}canIndent(){return!1}}function oe(){return{node:ie()}}function ie(){return l.$applyNodeReplacement(new te)}function le(n){return n instanceof te}return se.$computeTableMap=K,se.$createTableCellNode=O,se.$createTableNode=ie,se.$createTableNodeWithDimensions=function(n,t,o=!0){let x=ie();for(let k=0;k<n;k++){let D=v();for(let W=0;W<t;W++){var $=s.NO_STATUS;typeof o=="object"?(k===0&&o.rows&&($|=s.ROW),W===0&&o.columns&&($|=s.COLUMN)):o&&(k===0&&($|=s.ROW),W===0&&($|=s.COLUMN)),$=O($);let Z=l.$createParagraphNode();Z.append(l.$createTextNode()),$.append(Z),D.append($)}x.append(D)}return x},se.$createTableRowNode=v,se.$createTableSelection=d,se.$deleteTableColumn=function(n,t){let o=n.getChildren();for(let $=0;$<o.length;$++){var x=o[$];if(c(x)){if(x=x.getChildren(),t>=x.length||0>t)throw Error("Table column target index out of range");x[t].remove()}}return n},se.$deleteTableColumn__EXPERIMENTAL=function(){var n=l.$getSelection();l.$isRangeSelection(n)||R(n)||e(118);var t=n.anchor.getNode();n=n.focus.getNode();let[o,,x]=z(t);[t]=z(n);let[$,k,D]=K(x,o,t);var{startColumn:W}=k;let{startRow:Z,startColumn:re}=D;n=Math.min(W,re),W=Math.max(W+o.__colSpan-1,re+t.__colSpan-1);let F=W-n+1;if($[0].length===W-n+1)x.selectPrevious(),x.remove();else{var Y=$.length;for(let J=0;J<Y;J++)for(let X=n;X<=W;X++){let{cell:ne,startColumn:Q}=$[J][X];Q<n?X===n&&ne.setColSpan(ne.__colSpan-Math.min(F,ne.__colSpan-(n-Q))):Q+ne.__colSpan-1>W?X===W&&ne.setColSpan(ne.__colSpan-(W-Q+1)):ne.remove()}n=$[Z],t=n[re+t.__colSpan],t!==void 0?({cell:t}=t,L(t)):({cell:t}=n[re-1],L(t))}},se.$deleteTableRow__EXPERIMENTAL=function(){var n=l.$getSelection();l.$isRangeSelection(n)||R(n)||e(118);var t=n.anchor.getNode();n=n.focus.getNode();let[o,,x]=z(t);[n]=z(n);let[$,k,D]=K(x,o,n);({startRow:t}=k);var{startRow:W}=D;if(n=W+n.__rowSpan-1,$.length===n-t+1)x.remove();else{W=$[0].length;var Z=$[n+1],re=x.getChildAtIndex(n+1);for(let Y=n;Y>=t;Y--){for(var F=W-1;0<=F;F--){let{cell:J,startRow:X,startColumn:ne}=$[Y][F];if(ne===F&&(Y===t&&X<t&&J.setRowSpan(J.__rowSpan-(X-t)),X>=t&&X+J.__rowSpan-1>n))if(J.setRowSpan(J.__rowSpan-(n-X+1)),re===null&&e(122),F===0)M(re,J);else{let{cell:Q}=Z[F-1];Q.insertAfter(J)}}F=x.getChildAtIndex(Y),c(F)||e(123,String(Y)),F.remove()}Z!==void 0?({cell:t}=Z[0],L(t)):({cell:t}=$[t-1][0],L(t))}},se.$getElementForTableNode=function(n,t){if(n=n.getElementByKey(t.getKey()),n==null)throw Error("Table Element Not Found");return ae(n)},se.$getNodeTriplet=z,se.$getTableCellNodeFromLexicalNode=function(n){return n=f.$findMatchingParent(n,t=>_(t)),_(n)?n:null},se.$getTableCellNodeRect=G,se.$getTableColumnIndexFromTableCellNode=function(n){return i(n).getChildren().findIndex(t=>t.is(n))},se.$getTableNodeFromLexicalNodeOrThrow=g,se.$getTableRowIndexFromTableCellNode=function(n){let t=i(n);return g(t).getChildren().findIndex(o=>o.is(t))},se.$getTableRowNodeFromTableCellNodeOrThrow=i,se.$insertTableColumn=function(n,t,o=!0,x,$){let k=n.getChildren(),D=[];for(let re=0;re<k.length;re++){let F=k[re];if(c(F))for(let Y=0;Y<x;Y++){var W=F.getChildren();if(t>=W.length||0>t)throw Error("Table column target index out of range");W=W[t],_(W)||e(12);let{left:J,right:X}=a(W,$);var Z=s.NO_STATUS;(J&&J.hasHeaderState(s.ROW)||X&&X.hasHeaderState(s.ROW))&&(Z|=s.ROW),Z=O(Z),Z.append(l.$createParagraphNode()),D.push({newTableCell:Z,targetCell:W})}}return D.forEach(({newTableCell:re,targetCell:F})=>{o?F.insertAfter(re):F.insertBefore(re)}),n},se.$insertTableColumn__EXPERIMENTAL=function(n=!0){function t(Y=s.NO_STATUS){return Y=O(Y).append(l.$createParagraphNode()),re===null&&(re=Y),Y}var o=l.$getSelection();l.$isRangeSelection(o)||R(o)||e(118);var x=o.anchor.getNode();o=o.focus.getNode(),[x]=z(x);let[$,,k]=z(o),[D,W,Z]=K(k,$,x);x=D.length,o=n?Math.max(W.startColumn,Z.startColumn):Math.min(W.startColumn,Z.startColumn),n=n?o+$.__colSpan-1:o-1,o=k.getFirstChild(),c(o)||e(120);let re=null;var F=o;e:for(o=0;o<x;o++){o!==0&&(F=F.getNextSibling(),c(F)||e(121));let Y=D[o],J=y(Y[0>n?0:n].cell.__headerState,s.ROW);if(0>n){M(F,t(J));continue}let{cell:X,startColumn:ne,startRow:Q}=Y[n];if(ne+X.__colSpan-1<=n){let de=X,_e=Q,me=n;for(;_e!==o&&1<de.__rowSpan;)if(me-=X.__colSpan,0<=me){let{cell:xe,startRow:Me}=Y[me];de=xe,_e=Me}else{F.append(t(J));continue e}de.insertAfter(t(J))}else X.setColSpan(X.__colSpan+1)}re!==null&&L(re)},se.$insertTableRow=function(n,t,o=!0,x,$){var k=n.getChildren();if(t>=k.length||0>t)throw Error("Table row target index out of range");if(t=k[t],c(t))for(k=0;k<x;k++){let W=t.getChildren(),Z=W.length,re=v();for(let F=0;F<Z;F++){var D=W[F];_(D)||e(12);let{above:Y,below:J}=a(D,$);D=s.NO_STATUS;let X=Y&&Y.getWidth()||J&&J.getWidth()||void 0;(Y&&Y.hasHeaderState(s.COLUMN)||J&&J.hasHeaderState(s.COLUMN))&&(D|=s.COLUMN),D=O(D,1,X),D.append(l.$createParagraphNode()),re.append(D)}o?t.insertAfter(re):t.insertBefore(re)}else throw Error("Row before insertion index does not exist.");return n},se.$insertTableRow__EXPERIMENTAL=function(n=!0){var t=l.$getSelection();l.$isRangeSelection(t)||R(t)||e(118),t=t.focus.getNode();let[o,,x]=z(t),[$,k]=K(x,o,o);t=$[0].length;var{startRow:D}=k;if(n){n=D+o.__rowSpan-1;var W=$[n];D=v();for(var Z=0;Z<t;Z++){let{cell:F,startRow:Y}=W[Z];if(Y+F.__rowSpan-1<=n){var re=y(W[Z].cell.__headerState,s.COLUMN);D.append(O(re).append(l.$createParagraphNode()))}else F.setRowSpan(F.__rowSpan+1)}t=x.getChildAtIndex(n),c(t)||e(145),t.insertAfter(D)}else{for(W=$[D],n=v(),Z=0;Z<t;Z++){let{cell:F,startRow:Y}=W[Z];Y===D?(re=y(W[Z].cell.__headerState,s.COLUMN),n.append(O(re).append(l.$createParagraphNode()))):F.setRowSpan(F.__rowSpan+1)}t=x.getChildAtIndex(D),c(t)||e(145),t.insertBefore(n)}},se.$isTableCellNode=_,se.$isTableNode=le,se.$isTableRowNode=c,se.$isTableSelection=R,se.$removeTableRowAtIndex=function(n,t){let o=n.getChildren();if(t>=o.length||0>t)throw Error("Expected table cell to be inside of table row.");return o[t].remove(),n},se.$unmergeCell=function(){var n=l.$getSelection();l.$isRangeSelection(n)||R(n)||e(118),n=n.anchor.getNode();let[t,o,x]=z(n);n=t.__colSpan;let $=t.__rowSpan;if(1<n){for(var k=1;k<n;k++)t.insertAfter(O(s.NO_STATUS));t.setColSpan(1)}if(1<$){let[Z,re]=K(x,t,t),{startColumn:F,startRow:Y}=re,J;for(k=1;k<$;k++){var D=Y+k;let X=Z[D];J=(J||o).getNextSibling(),c(J)||e(125);var W=null;for(let ne=0;ne<F;ne++){let Q=X[ne],de=Q.cell;Q.startRow===D&&(W=de),1<de.__colSpan&&(ne+=de.__colSpan-1)}if(W===null)for(W=0;W<n;W++)M(J,O(s.NO_STATUS));else for(D=0;D<n;D++)W.insertAfter(O(s.NO_STATUS))}t.setRowSpan(1)}},se.INSERT_TABLE_COMMAND=E,se.TableCellHeaderStates=s,se.TableCellNode=I,se.TableNode=te,se.TableObserver=j,se.TableRowNode=m,se.applyTableHandlers=function(n,t,o,x){function $(F){return F=n.getCordsFromCellNode(F,D.table),n.getDOMCellFromCordsOrThrow(F.x,F.y,D.table)}let k=o.getRootElement();if(k===null)throw Error("No root element.");let D=new j(o,n.getKey()),W=o._window||window;t.__lexicalTableSelection=D,t.addEventListener("mousedown",F=>{setTimeout(()=>{if(F.button===0&&W){var Y=ue(F.target);Y!==null&&(q(F),D.setAnchorCellForSelection(Y));var J=()=>{W.removeEventListener("mouseup",J),W.removeEventListener("mousemove",X)},X=ne=>{const Q=ue(ne.target);Q===null||D.anchorX===Q.x&&D.anchorY===Q.y||(ne.preventDefault(),D.setFocusCellForSelection(Q))};W.addEventListener("mouseup",J),W.addEventListener("mousemove",X)}},0)});let Z=F=>{F.button===0&&o.update(()=>{const Y=l.$getSelection(),J=F.target;R(Y)&&Y.tableKey===D.tableNodeKey&&k.contains(J)&&D.clearHighlight()})};W.addEventListener("mousedown",Z),D.listenersToRemove.add(()=>W.removeEventListener("mousedown",Z)),D.listenersToRemove.add(o.registerCommand(l.KEY_ARROW_DOWN_COMMAND,F=>B(o,F,"down",n,D),l.COMMAND_PRIORITY_HIGH)),D.listenersToRemove.add(o.registerCommand(l.KEY_ARROW_UP_COMMAND,F=>B(o,F,"up",n,D),l.COMMAND_PRIORITY_HIGH)),D.listenersToRemove.add(o.registerCommand(l.KEY_ARROW_LEFT_COMMAND,F=>B(o,F,"backward",n,D),l.COMMAND_PRIORITY_HIGH)),D.listenersToRemove.add(o.registerCommand(l.KEY_ARROW_RIGHT_COMMAND,F=>B(o,F,"forward",n,D),l.COMMAND_PRIORITY_HIGH)),D.listenersToRemove.add(o.registerCommand(l.KEY_ESCAPE_COMMAND,F=>{var Y=l.$getSelection();return R(Y)&&(Y=f.$findMatchingParent(Y.focus.getNode(),_),_(Y))?(q(F),Y.selectEnd(),!0):!1},l.COMMAND_PRIORITY_HIGH));let re=F=>()=>{var Y=l.$getSelection();if(!U(Y,n))return!1;if(R(Y))return D.clearText(),!0;if(l.$isRangeSelection(Y)){const ne=f.$findMatchingParent(Y.anchor.getNode(),Q=>_(Q));if(!_(ne))return!1;var J=Y.anchor.getNode(),X=Y.focus.getNode();if(J=n.isParentOf(J),X=n.isParentOf(X),J&&!X||X&&!J)return D.clearText(),!0;if(J=(X=f.$findMatchingParent(Y.anchor.getNode(),Q=>l.$isElementNode(Q)))&&f.$findMatchingParent(X,Q=>l.$isElementNode(Q)&&_(Q.getParent())),!l.$isElementNode(J)||!l.$isElementNode(X))return!1;if(F===l.DELETE_LINE_COMMAND&&J.getPreviousSibling()===null)return!0;if((F===l.DELETE_CHARACTER_COMMAND||F===l.DELETE_WORD_COMMAND)&&Y.isCollapsed()&&Y.anchor.offset===0&&X!==J){Y=X.getChildren();const Q=l.$createParagraphNode();return Y.forEach(de=>Q.append(de)),X.replace(Q),X.getWritable().__parent=ne.getKey(),!0}}return!1};return[l.DELETE_WORD_COMMAND,l.DELETE_LINE_COMMAND,l.DELETE_CHARACTER_COMMAND].forEach(F=>{D.listenersToRemove.add(o.registerCommand(F,re(F),l.COMMAND_PRIORITY_CRITICAL))}),t=F=>{const Y=l.$getSelection();return U(Y,n)?R(Y)?(F.preventDefault(),F.stopPropagation(),D.clearText(),!0):(l.$isRangeSelection(Y)&&(F=f.$findMatchingParent(Y.anchor.getNode(),J=>_(J)),_(F)),!1):!1},D.listenersToRemove.add(o.registerCommand(l.KEY_BACKSPACE_COMMAND,t,l.COMMAND_PRIORITY_CRITICAL)),D.listenersToRemove.add(o.registerCommand(l.KEY_DELETE_COMMAND,t,l.COMMAND_PRIORITY_CRITICAL)),D.listenersToRemove.add(o.registerCommand(l.FORMAT_TEXT_COMMAND,F=>{let Y=l.$getSelection();return U(Y,n)?R(Y)?(D.formatCells(F),!0):(l.$isRangeSelection(Y)&&(F=f.$findMatchingParent(Y.anchor.getNode(),J=>_(J)),_(F)),!1):!1},l.COMMAND_PRIORITY_CRITICAL)),D.listenersToRemove.add(o.registerCommand(l.CONTROLLED_TEXT_INSERTION_COMMAND,()=>{var F=l.$getSelection();return U(F,n)&&(R(F)?D.clearHighlight():l.$isRangeSelection(F)&&(F=f.$findMatchingParent(F.anchor.getNode(),Y=>_(Y)),_(F))),!1},l.COMMAND_PRIORITY_CRITICAL)),x&&D.listenersToRemove.add(o.registerCommand(l.KEY_TAB_COMMAND,F=>{var Y=l.$getSelection();return!l.$isRangeSelection(Y)||!Y.isCollapsed()||!U(Y,n)||(Y=S(Y.anchor.getNode()),Y===null)?!1:(q(F),Y=n.getCordsFromCellNode(Y,D.table),A(D,n,Y.x,Y.y,F.shiftKey?"backward":"forward"),!0)},l.COMMAND_PRIORITY_CRITICAL)),D.listenersToRemove.add(o.registerCommand(l.FOCUS_COMMAND,()=>n.isSelected(),l.COMMAND_PRIORITY_HIGH)),D.listenersToRemove.add(o.registerCommand(l.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,F=>{let{nodes:Y,selection:J}=F;F=J.getStartEndPoints();var X=R(J);if(X=l.$isRangeSelection(J)&&f.$findMatchingParent(J.anchor.getNode(),Ne=>_(Ne))!==null&&f.$findMatchingParent(J.focus.getNode(),Ne=>_(Ne))!==null||X,Y.length!==1||!le(Y[0])||!X||F===null)return!1;var[ne]=F,Q=Y[0];F=Q.getChildren(),X=Q.getFirstChildOrThrow().getChildrenSize(),Q=Q.getChildrenSize();var de=f.$findMatchingParent(ne.getNode(),Ne=>_(Ne)),_e=(ne=de&&f.$findMatchingParent(de,Ne=>c(Ne)))&&f.$findMatchingParent(ne,Ne=>le(Ne));if(!_(de)||!c(ne)||!le(_e))return!1;var me=ne.getIndexWithinParent(),xe=Math.min(_e.getChildrenSize()-1,me+Q-1);Q=de.getIndexWithinParent(),de=Math.min(ne.getChildrenSize()-1,Q+X-1),X=Math.min(Q,de),ne=Math.min(me,xe),Q=Math.max(Q,de),me=Math.max(me,xe),_e=_e.getChildren(),xe=0;let Me,Ke;for(de=ne;de<=me;de++){var Ae=_e[de];if(!c(Ae))return!1;var Pe=F[xe];if(!c(Pe))return!1;Ae=Ae.getChildren(),Pe=Pe.getChildren();let Ne=0;for(let Le=X;Le<=Q;Le++){let $e=Ae[Le];if(!_($e))return!1;let _t=Pe[Ne];if(!_(_t))return!1;de===ne&&Le===X?Me=$e.getKey():de===me&&Le===Q&&(Ke=$e.getKey());let gr=$e.getChildren();_t.getChildren().forEach(De=>{l.$isTextNode(De)&&l.$createParagraphNode().append(De),$e.append(De)}),gr.forEach(De=>De.remove()),Ne++}xe++}return Me&&Ke&&(F=d(),F.set(Y[0].getKey(),Me,Ke),l.$setSelection(F)),!0},l.COMMAND_PRIORITY_CRITICAL)),D.listenersToRemove.add(o.registerCommand(l.SELECTION_CHANGE_COMMAND,()=>{let F=l.$getSelection(),Y=l.$getPreviousSelection();if(l.$isRangeSelection(F)){let{anchor:de,focus:_e}=F;var J=de.getNode(),X=_e.getNode();J=S(J),X=S(X);var ne=J&&n.is(P(J)),Q=X&&n.is(P(X));let me=ne!==Q;Q=ne&&Q,ne=F.isBackward(),me?(J=F.clone(),J.focus.set(n.getKey(),ne?0:n.getChildrenSize(),"element"),l.$setSelection(J),u(o,D)):Q&&!J.is(X)&&(D.setAnchorCellForSelection($(J)),D.setFocusCellForSelection($(X),!0))}return F&&!F.is(Y)&&(R(F)||R(Y))&&D.tableSelection&&!D.tableSelection.is(Y)?(R(F)&&F.tableKey===D.tableNodeKey?D.updateTableTableSelection(F):!R(F)&&R(Y)&&Y.tableKey===D.tableNodeKey&&D.updateTableTableSelection(null),!1):(D.hasHijackedSelectionStyles&&!n.isSelected()?C(o,D):!D.hasHijackedSelectionStyles&&n.isSelected()&&u(o,D),!1)},l.COMMAND_PRIORITY_CRITICAL)),D},se.getDOMCellFromTarget=ue,se.getTableObserverFromTableElement=function(n){return n.__lexicalTableSelection},se}var ht,nr;function cr(){return nr||(nr=1,ht=cn()),ht}var ir;function gn(){if(ir)return ft;ir=1;var f=Re(),l=cr(),T=Ce(),s=pe(),I=ye();function w(O){let _=new URLSearchParams;_.append("code",O);for(let E=1;E<arguments.length;E++)_.append("v",arguments[E]);throw Error(`Minified Lexical error #${O}; visit https://lexical.dev/docs/error?${_} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}return ft.TablePlugin=function({hasCellMerge:O=!0,hasCellBackgroundColor:_=!0,hasTabHandler:E=!0}){let[m]=f.useLexicalComposerContext();return I.useEffect(()=>(m.hasNodes([l.TableNode,l.TableCellNode,l.TableRowNode])||w(10),m.registerCommand(l.INSERT_TABLE_COMMAND,({columns:p,rows:v,includeHeaders:c})=>(p=l.$createTableNodeWithDimensions(Number(v),Number(p),c),T.$insertNodeToNearestRoot(p),p=p.getFirstDescendant(),s.$isTextNode(p)&&p.select(),!0),s.COMMAND_PRIORITY_EDITOR)),[m]),I.useEffect(()=>{let p=new Map,v=e=>{const r=e.getKey(),i=m.getElementByKey(r);i&&!p.has(r)&&(e=l.applyTableHandlers(e,i,m,E),p.set(r,e))};m.getEditorState().read(()=>{let e=s.$nodesOfType(l.TableNode);for(let r of e)l.$isTableNode(r)&&v(r)});let c=m.registerMutationListener(l.TableNode,e=>{for(const[r,i]of e)i==="created"?m.getEditorState().read(()=>{const g=s.$getNodeByKey(r);l.$isTableNode(g)&&v(g)}):i==="destroyed"&&(e=p.get(r),e!==void 0&&(e.removeListeners(),p.delete(r)))});return()=>{c();for(let[,e]of p)e.removeListeners()}},[m,E]),I.useEffect(()=>{if(!O)return m.registerNodeTransform(l.TableCellNode,p=>{if(1<p.getColSpan()||1<p.getRowSpan()){var[,,v]=l.$getNodeTriplet(p);[p]=l.$computeTableMap(v,p,p);let e=p.length,r=p[0].length;if(v=v.getFirstChild(),!l.$isTableRowNode(v))throw Error("Expected TableNode first child to be a RowNode");let i=[];for(let g=0;g<e;g++){if(g!==0&&(v=v.getNextSibling(),!l.$isTableRowNode(v)))throw Error("Expected TableNode first child to be a RowNode");let a=null;for(let y=0;y<r;y++){var c=p[g][y];let L=c.cell;if(c.startRow===g&&c.startColumn===y)a=L,i.push(L);else if(1<L.getColSpan()||1<L.getRowSpan()){if(!l.$isTableCellNode(L))throw Error("Expected TableNode cell to be a TableCellNode");c=l.$createTableCellNode(L.__headerState),a!==null?a.insertAfter(c):T.$insertFirst(v,c)}}}for(let g of i)g.setColSpan(1),g.setRowSpan(1)}})},[m,O]),I.useEffect(()=>{if(!_)return m.registerNodeTransform(l.TableCellNode,p=>{p.getBackgroundColor()!==null&&p.setBackgroundColor(null)})},[m,_,O]),null},ft}var pt,or;function fn(){return or||(or=1,pt=gn()),pt}var Rn=fn(),Mn=ur(),Ln=cr(),$n=dr(),Dn=ar(),ge={},lr;function hn(){if(lr)return ge;lr=1;var f=fr();hr(),pr(),mr(),_r(),Nr(),Cr(),Tr(),Er(),xr(),vr(),Sr(),yr(),Or(),Rr();var l=Ce(),T=pe();let s=N=>N!=null&&f.languages.hasOwnProperty(N)?N:void 0;function I(N,S){for(let P of N.childNodes){if(l.isHTMLElement(P)&&P.tagName===S)return!0;I(P,S)}return!1}class w extends T.ElementNode{static getType(){return"code"}static clone(S){return new w(S.__language,S.__key)}constructor(S,P){super(P),this.__language=s(S)}createDOM(S){let P=document.createElement("code");return l.addClassNamesToElement(P,S.theme.code),P.setAttribute("spellcheck","false"),(S=this.getLanguage())&&P.setAttribute("data-highlight-language",S),P}updateDOM(S,P){let B=this.__language;return S=S.__language,B?B!==S&&P.setAttribute("data-highlight-language",B):S&&P.removeAttribute("data-highlight-language"),!1}exportDOM(){let S=document.createElement("pre");S.setAttribute("spellcheck","false");let P=this.getLanguage();return P&&S.setAttribute("data-highlight-language",P),{element:S}}static importDOM(){return{code:S=>S.textContent!=null&&(/\r?\n/.test(S.textContent)||I(S,"BR"))?{conversion:E,priority:1}:null,div:()=>({conversion:m,priority:1}),pre:()=>({conversion:E,priority:0}),table:S=>r(S)?{conversion:p,priority:3}:null,td:S=>{let P=S.closest("table");return S.classList.contains("js-file-line")?{conversion:c,priority:3}:P&&r(P)?{conversion:v,priority:3}:null},tr:S=>(S=S.closest("table"))&&r(S)?{conversion:v,priority:3}:null}}static importJSON(S){let P=O(S.language);return P.setFormat(S.format),P.setIndent(S.indent),P.setDirection(S.direction),P}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),type:"code",version:1}}insertNewAfter(S,P=!0){var B=this.getChildren(),q=B.length;if(2<=q&&B[q-1].getTextContent()===`
`&&B[q-2].getTextContent()===`
`&&S.isCollapsed()&&S.anchor.key===this.__key&&S.anchor.offset===q)return B[q-1].remove(),B[q-2].remove(),S=T.$createParagraphNode(),this.insertAfter(S,P),S;let{anchor:te,focus:oe}=S;if(P=(te.isBefore(oe)?te:oe).getNode(),T.$isTextNode(P)){for(q=z(P),B=[];;)if(T.$isTabNode(q))B.push(T.$createTabNode()),q=q.getNextSibling();else if(K(q)){for(var ie=0,le=q.getTextContent(),n=q.getTextContentSize();ie<n&&le[ie]===" ";ie++);if(ie!==0&&B.push(M(" ".repeat(ie))),ie!==n)break;q=q.getNextSibling()}else break;q=P.splitText(te.offset)[0],ie=te.offset===0?0:1,ie=q.getIndexWithinParent()+ie,le=P.getParentOrThrow(),n=[T.$createLineBreakNode(),...B],le.splice(ie,0,n),(B=B[B.length-1])?B.select():te.offset===0?q.selectPrevious():q.getNextSibling().selectNext(0,0)}return _(P)&&({offset:S}=S.anchor,P.splice(S,0,[T.$createLineBreakNode()]),P.select(S+1,S+1)),null}canIndent(){return!1}collapseAtStart(){let S=T.$createParagraphNode();return this.getChildren().forEach(P=>S.append(P)),this.replace(S),!0}setLanguage(S){this.getWritable().__language=s(S)}getLanguage(){return this.getLatest().__language}}function O(N){return T.$applyNodeReplacement(new w(N))}function _(N){return N instanceof w}function E(N){let S;return l.isHTMLElement(N)&&(S=N.getAttribute("data-highlight-language")),{node:O(S)}}function m(N){let S=N.style.fontFamily.match("monospace")!==null;return S||e(N)?{after:P=>{let B=N.parentNode;return B!=null&&N!==B.lastChild&&P.push(T.$createLineBreakNode()),P},node:S?O():null}:{node:null}}function p(){return{node:O()}}function v(){return{node:null}}function c(N){return{after:S=>(N.parentNode&&N.parentNode.nextSibling&&S.push(T.$createLineBreakNode()),S),node:null}}function e(N){for(N=N.parentElement;N!==null;){if(N.style.fontFamily.match("monospace")!==null)return!0;N=N.parentElement}return!1}function r(N){return N.classList.contains("js-file-line-container")}let i={c:"C",clike:"C-like",cpp:"C++",css:"CSS",html:"HTML",java:"Java",js:"JavaScript",markdown:"Markdown",objc:"Objective-C",plain:"Plain Text",py:"Python",rust:"Rust",sql:"SQL",swift:"Swift",typescript:"TypeScript",xml:"XML"},g={cpp:"cpp",java:"java",javascript:"js",md:"markdown",plaintext:"plain",python:"py",text:"plain",ts:"typescript"};function a(N){return g[N]||N}class y extends T.TextNode{constructor(S,P,B){super(S,B),this.__highlightType=P}static getType(){return"code-highlight"}static clone(S){return new y(S.__text,S.__highlightType||void 0,S.__key)}getHighlightType(){return this.getLatest().__highlightType}canHaveFormat(){return!1}createDOM(S){let P=super.createDOM(S);return S=L(S.theme,this.__highlightType),l.addClassNamesToElement(P,S),P}updateDOM(S,P,B){let q=super.updateDOM(S,P,B);return S=L(B.theme,S.__highlightType),B=L(B.theme,this.__highlightType),S!==B&&(S&&l.removeClassNamesFromElement(P,S),B&&l.addClassNamesToElement(P,B)),q}static importJSON(S){let P=M(S.text,S.highlightType);return P.setFormat(S.format),P.setDetail(S.detail),P.setMode(S.mode),P.setStyle(S.style),P}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType(),type:"code-highlight",version:1}}setFormat(){return this}isParentRequired(){return!0}createParentElementNode(){return O()}}function L(N,S){return S&&N&&N.codeHighlight&&N.codeHighlight[S]}function M(N,S){return T.$applyNodeReplacement(new y(N,S))}function K(N){return N instanceof y}function z(N){let S=N;for(;K(N)||T.$isTabNode(N);)S=N,N=N.getPreviousSibling();return S}function G(N){let S=N;for(;K(N)||T.$isTabNode(N);)S=N,N=N.getNextSibling();return S}let V={defaultLanguage:"javascript",tokenize(N,S){return f.tokenize(N,f.languages[S||""]||f.languages[this.defaultLanguage])}};function R(N,S){let P=null;var B=null,q=N;let te=S,oe=N.getTextContent();for(;;){if(te===0){if(q=q.getPreviousSibling(),q===null)break;if(!(K(q)||T.$isTabNode(q)||T.$isLineBreakNode(q)))throw Error("Expected a valid Code Node: CodeHighlightNode, TabNode, LineBreakNode");if(T.$isLineBreakNode(q)){P={node:q,offset:1};break}te=Math.max(0,q.getTextContentSize()-1),oe=q.getTextContent()}else te--;let ie=oe[te];K(q)&&ie!==" "&&(B={node:q,offset:te})}if(B!==null)return B;if(B=null,S<N.getTextContentSize()?K(N)&&(B=N.getTextContent()[S]):(q=N.getNextSibling(),K(q)&&(B=q.getTextContent()[0])),B!==null&&B!==" ")return P;e:for(B=N,q=N.getTextContent(),N=N.getTextContentSize();;){if(!K(B)||S===N){if(B=B.getNextSibling(),B===null||T.$isLineBreakNode(B)){N=null;break e}K(B)&&(S=0,q=B.getTextContent(),N=B.getTextContentSize())}if(K(B)){if(q[S]!==" "){N={node:B,offset:S};break e}S++}}return N!==null?N:P}function d(N){if(N=G(N),T.$isLineBreakNode(N))throw Error("Unexpected lineBreakNode in getEndOfCodeInLine");return N}function h(N,S,P){let B=N.getParent();_(B)?ue(B,S,P):K(N)&&N.replace(T.$createTextNode(N.__text))}let j=new Set;function ue(N,S,P){let B=N.getKey();j.has(B)||(j.add(B),N.getLanguage()===void 0&&N.setLanguage(P.defaultLanguage),S.update(()=>{Ee(B,()=>{var q=T.$getNodeByKey(B);if(!_(q)||!q.isAttached())return!1;var te=q.getTextContent();te=P.tokenize(te,q.getLanguage()||P.defaultLanguage),te=ae(te);var oe=q.getChildren();for(q=0;q<oe.length&&b(oe[q],te[q]);)q++;var ie=oe.length;let le=te.length,n=Math.min(ie,le)-q,t=0;for(;t<n;)if(t++,!b(oe[ie-t],te[le-t])){t--;break}oe=q,ie-=t,te=te.slice(q,le-t);let{from:o,to:x,nodesForReplacement:$}={from:oe,nodesForReplacement:te,to:ie};return o!==x||$.length?(N.splice(o,x-o,$),!0):!1})},{onUpdate:()=>{j.delete(B)},skipTransforms:!0}))}function ae(N,S){let P=[];for(let B of N)if(typeof B=="string"){N=B.split(/(\n|\t)/);let q=N.length;for(let te=0;te<q;te++){let oe=N[te];oe===`
`||oe===`\r
`?P.push(T.$createLineBreakNode()):oe==="	"?P.push(T.$createTabNode()):0<oe.length&&P.push(M(oe,S))}}else({content:N}=B),typeof N=="string"?P.push(...ae([N],B.type)):Array.isArray(N)&&P.push(...ae(N,B.type));return P}function Ee(N,S){if(N=T.$getNodeByKey(N),_(N)&&N.isAttached()){var P=T.$getSelection();if(T.$isRangeSelection(P)){P=P.anchor;var B=P.offset,q=P.type==="element"&&T.$isLineBreakNode(N.getChildAtIndex(P.offset-1)),te=0;if(!q){let oe=P.getNode();te=B+oe.getPreviousSiblings().reduce((ie,le)=>ie+le.getTextContentSize(),0)}S()&&(q?P.getNode().select(B,B):N.getChildren().some(oe=>{let ie=T.$isTextNode(oe);if(ie||T.$isLineBreakNode(oe)){let le=oe.getTextContentSize();if(ie&&le>=te)return oe.select(te,te),!0;te-=le}return!1}))}else S()}}function b(N,S){return K(N)&&K(S)&&N.__text===S.__text&&N.__highlightType===S.__highlightType||T.$isTabNode(N)&&T.$isTabNode(S)||T.$isLineBreakNode(N)&&T.$isLineBreakNode(S)}function u(N){if(!T.$isRangeSelection(N))return!1;var S=N.anchor.getNode();return N=N.focus.getNode(),S.is(N)&&_(S)?!0:(S=S.getParent(),_(S)&&S.is(N.getParent()))}function C(N){N=N.getNodes();let S=[[]];if(N.length===1&&_(N[0]))return S;let P=S[0];for(let B=0;B<N.length;B++){let q=N[B];if(!(K(q)||T.$isTabNode(q)||T.$isLineBreakNode(q)))throw Error("Expected selection to be inside CodeBlock and consisting of CodeHighlightNode, TabNode and LineBreakNode");T.$isLineBreakNode(q)?B!==0&&0<P.length&&(P=[],S.push(P)):P.push(q)}return S}function A(N){var S=T.$getSelection();if(!T.$isRangeSelection(S)||!u(S))return null;let P=N?T.OUTDENT_CONTENT_COMMAND:T.INDENT_CONTENT_COMMAND;if(N=N?T.OUTDENT_CONTENT_COMMAND:T.INSERT_TAB_COMMAND,1<C(S).length)return P;var B=S.getNodes()[0];if(!(_(B)||K(B)||T.$isTabNode(B)||T.$isLineBreakNode(B)))throw Error("Expected selection firstNode to be CodeHighlightNode or TabNode");if(_(B))return P;let q=z(B);B=G(B);var te=S.anchor;let oe=S.focus;return oe.isBefore(te)?S=oe:(S=te,te=oe),q!==null&&B!==null&&S.key===q.getKey()&&S.offset===0&&te.key===B.getKey()&&te.offset===B.getTextContentSize()?P:N}function H(N){var S=T.$getSelection();if(!T.$isRangeSelection(S)||!u(S))return!1;var P=C(S);let B=P.length;if(1<P.length){for(S=0;S<B;S++){var q=P[S];0<q.length&&(q=q[0],S===0&&(q=z(q)),q!==null&&(N===T.INDENT_CONTENT_COMMAND?q.insertBefore(T.$createTabNode()):T.$isTabNode(q)&&q.remove()))}return!0}if(P=S.getNodes()[0],!(_(P)||K(P)||T.$isTabNode(P)||T.$isLineBreakNode(P)))throw Error("Expected selection firstNode to be CodeHighlightNode or CodeTabNode");if(_(P))return N===T.INDENT_CONTENT_COMMAND&&S.insertNodes([T.$createTabNode()]),!0;if(P=z(P),P===null)throw Error("Expected getFirstCodeNodeOfLine to return a valid Code Node");return N===T.INDENT_CONTENT_COMMAND?T.$isLineBreakNode(P)?P.insertAfter(T.$createTabNode()):P.insertBefore(T.$createTabNode()):T.$isTabNode(P)&&P.remove(),!0}function U(N,S){let P=T.$getSelection();if(!T.$isRangeSelection(P))return!1;let{anchor:B,focus:q}=P,te=B.offset,oe=q.offset,ie=B.getNode(),le=q.getNode();var n=N===T.KEY_ARROW_UP_COMMAND;if(!u(P)||!K(ie)&&!T.$isTabNode(ie)||!K(le)&&!T.$isTabNode(le))return!1;if(!S.altKey){if(P.isCollapsed()){if(N=ie.getParentOrThrow(),n&&te===0&&ie.getPreviousSibling()===null){if(N.getPreviousSibling()===null)return N.selectPrevious(),S.preventDefault(),!0}else if(!n&&te===ie.getTextContentSize()&&ie.getNextSibling()===null&&N.getNextSibling()===null)return N.selectNext(),S.preventDefault(),!0}return!1}let t;if(ie.isBefore(le)){var o=z(ie);t=G(le)}else o=z(le),t=G(ie);if(o==null||t==null)return!1;let x=o.getNodesBetween(t);for(let k=0;k<x.length;k++){let D=x[k];if(!K(D)&&!T.$isTabNode(D)&&!T.$isLineBreakNode(D))return!1}if(S.preventDefault(),S.stopPropagation(),S=n?o.getPreviousSibling():t.getNextSibling(),!T.$isLineBreakNode(S)||(o=n?S.getPreviousSibling():S.getNextSibling(),o==null))return!0;n=K(o)||T.$isTabNode(o)||T.$isLineBreakNode(o)?n?z(o):G(o):null;let $=n??o;return S.remove(),x.forEach(k=>k.remove()),N===T.KEY_ARROW_UP_COMMAND?(x.forEach(k=>$.insertBefore(k)),$.insertBefore(S)):($.insertAfter(S),$=S,x.forEach(k=>{$.insertAfter(k),$=k})),P.setTextNodeRange(ie,te,le,oe),!0}function ee(N,S){let P=T.$getSelection();if(!T.$isRangeSelection(P))return!1;let{anchor:B,focus:q}=P;var te=B.getNode();let oe=q.getNode();if(N=N===T.MOVE_TO_START,!K(te)&&!T.$isTabNode(te)||!K(oe)&&!T.$isTabNode(oe))return!1;if(N)if(te=R(oe,q.offset),te!==null){let{node:ie,offset:le}=te;T.$isLineBreakNode(ie)?ie.selectNext(0,0):P.setTextNodeRange(ie,le,ie,le)}else oe.getParentOrThrow().selectStart();else d(oe).select();return S.preventDefault(),S.stopPropagation(),!0}return ge.$createCodeHighlightNode=M,ge.$createCodeNode=O,ge.$isCodeHighlightNode=K,ge.$isCodeNode=_,ge.CODE_LANGUAGE_FRIENDLY_NAME_MAP=i,ge.CODE_LANGUAGE_MAP=g,ge.CodeHighlightNode=y,ge.CodeNode=w,ge.DEFAULT_CODE_LANGUAGE="javascript",ge.PrismTokenizer=V,ge.getCodeLanguages=()=>Object.keys(f.languages).filter(N=>typeof f.languages[N]!="function").sort(),ge.getDefaultCodeLanguage=()=>"javascript",ge.getEndOfCodeInLine=d,ge.getFirstCodeNodeOfLine=z,ge.getLanguageFriendlyName=function(N){return N=a(N),i[N]||N},ge.getLastCodeNodeOfLine=G,ge.getStartOfCodeInLine=R,ge.normalizeCodeLang=a,ge.registerCodeHighlighting=function(N,S){if(!N.hasNodes([w,y]))throw Error("CodeHighlightPlugin: CodeNode or CodeHighlightNode not registered on editor");return S==null&&(S=V),l.mergeRegister(N.registerMutationListener(w,P=>{N.update(()=>{for(let[te,oe]of P)if(oe!=="destroyed"){var B=T.$getNodeByKey(te);if(B!==null)e:{var q=B;if(B=N.getElementByKey(q.getKey()),B===null)break e;q=q.getChildren();let ie=q.length;if(ie===B.__cachedChildrenLength)break e;B.__cachedChildrenLength=ie;let le="1",n=1;for(let t=0;t<ie;t++)T.$isLineBreakNode(q[t])&&(le+=`
`+ ++n);B.setAttribute("data-gutter",le)}}})}),N.registerNodeTransform(w,P=>ue(P,N,S)),N.registerNodeTransform(T.TextNode,P=>h(P,N,S)),N.registerNodeTransform(y,P=>h(P,N,S)),N.registerCommand(T.KEY_TAB_COMMAND,P=>{let B=A(P.shiftKey);return B===null?!1:(P.preventDefault(),N.dispatchCommand(B,void 0),!0)},T.COMMAND_PRIORITY_LOW),N.registerCommand(T.INSERT_TAB_COMMAND,()=>{let P=T.$getSelection();return u(P)?(T.$insertNodes([T.$createTabNode()]),!0):!1},T.COMMAND_PRIORITY_LOW),N.registerCommand(T.INDENT_CONTENT_COMMAND,()=>H(T.INDENT_CONTENT_COMMAND),T.COMMAND_PRIORITY_LOW),N.registerCommand(T.OUTDENT_CONTENT_COMMAND,()=>H(T.OUTDENT_CONTENT_COMMAND),T.COMMAND_PRIORITY_LOW),N.registerCommand(T.KEY_ARROW_UP_COMMAND,P=>U(T.KEY_ARROW_UP_COMMAND,P),T.COMMAND_PRIORITY_LOW),N.registerCommand(T.KEY_ARROW_DOWN_COMMAND,P=>U(T.KEY_ARROW_DOWN_COMMAND,P),T.COMMAND_PRIORITY_LOW),N.registerCommand(T.MOVE_TO_END,P=>ee(T.MOVE_TO_END,P),T.COMMAND_PRIORITY_LOW),N.registerCommand(T.MOVE_TO_START,P=>ee(T.MOVE_TO_START,P),T.COMMAND_PRIORITY_LOW))},ge}var mt,sr;function pn(){return sr||(sr=1,mt=hn()),mt}var wn=pn();export{Cn as L,Nn as a,Tn as b,Lr as c,En as d,Sn as e,xn as f,$r as g,vn as h,Mn as i,Ln as j,$n as k,Dn as l,wn as m,yn as n,On as o,Rn as p};
